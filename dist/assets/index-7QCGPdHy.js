(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function e(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(s){if(s.ep)return;s.ep=!0;const n=e(s);fetch(s.href,n)}})();class b extends Error{constructor(t){super("ClientResponseError"),this.url="",this.status=0,this.response={},this.isAbort=!1,this.originalError=null,Object.setPrototypeOf(this,b.prototype),t!==null&&typeof t=="object"&&(this.url=typeof t.url=="string"?t.url:"",this.status=typeof t.status=="number"?t.status:0,this.isAbort=!!t.isAbort,this.originalError=t.originalError,t.response!==null&&typeof t.response=="object"?this.response=t.response:t.data!==null&&typeof t.data=="object"?this.response=t.data:this.response={}),this.originalError||t instanceof b||(this.originalError=t),typeof DOMException<"u"&&t instanceof DOMException&&(this.isAbort=!0),this.name="ClientResponseError "+this.status,this.message=this.response?.message,this.message||(this.isAbort?this.message="The request was autocancelled. You can find more info in https://github.com/pocketbase/js-sdk#auto-cancellation.":this.originalError?.cause?.message?.includes("ECONNREFUSED ::1")?this.message="Failed to connect to the PocketBase server. Try changing the SDK URL from localhost to 127.0.0.1 (https://github.com/pocketbase/js-sdk/issues/21).":this.message="Something went wrong while processing your request.")}get data(){return this.response}toJSON(){return{...this}}}const O=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function X(o,t){const e={};if(typeof o!="string")return e;const i=Object.assign({},t||{}).decode||ee;let s=0;for(;s<o.length;){const n=o.indexOf("=",s);if(n===-1)break;let r=o.indexOf(";",s);if(r===-1)r=o.length;else if(r<n){s=o.lastIndexOf(";",n-1)+1;continue}const a=o.slice(s,n).trim();if(e[a]===void 0){let c=o.slice(n+1,r).trim();c.charCodeAt(0)===34&&(c=c.slice(1,-1));try{e[a]=i(c)}catch{e[a]=c}}s=r+1}return e}function B(o,t,e){const i=Object.assign({},e||{}),s=i.encode||te;if(!O.test(o))throw new TypeError("argument name is invalid");const n=s(t);if(n&&!O.test(n))throw new TypeError("argument val is invalid");let r=o+"="+n;if(i.maxAge!=null){const a=i.maxAge-0;if(isNaN(a)||!isFinite(a))throw new TypeError("option maxAge is invalid");r+="; Max-Age="+Math.floor(a)}if(i.domain){if(!O.test(i.domain))throw new TypeError("option domain is invalid");r+="; Domain="+i.domain}if(i.path){if(!O.test(i.path))throw new TypeError("option path is invalid");r+="; Path="+i.path}if(i.expires){if(!function(c){return Object.prototype.toString.call(c)==="[object Date]"||c instanceof Date}(i.expires)||isNaN(i.expires.valueOf()))throw new TypeError("option expires is invalid");r+="; Expires="+i.expires.toUTCString()}if(i.httpOnly&&(r+="; HttpOnly"),i.secure&&(r+="; Secure"),i.priority)switch(typeof i.priority=="string"?i.priority.toLowerCase():i.priority){case"low":r+="; Priority=Low";break;case"medium":r+="; Priority=Medium";break;case"high":r+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}if(i.sameSite)switch(typeof i.sameSite=="string"?i.sameSite.toLowerCase():i.sameSite){case!0:r+="; SameSite=Strict";break;case"lax":r+="; SameSite=Lax";break;case"strict":r+="; SameSite=Strict";break;case"none":r+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return r}function ee(o){return o.indexOf("%")!==-1?decodeURIComponent(o):o}function te(o){return encodeURIComponent(o)}let H;function v(o){if(o)try{const t=decodeURIComponent(H(o.split(".")[1]).split("").map(function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(t)||{}}catch{}return{}}function V(o,t=0){let e=v(o);return!(Object.keys(e).length>0&&(!e.exp||e.exp-t>Date.now()/1e3))}H=typeof atob=="function"?atob:o=>{let t=String(o).replace(/=+$/,"");if(t.length%4==1)throw new Error("'atob' failed: The string to be decoded is not correctly encoded.");for(var e,i,s=0,n=0,r="";i=t.charAt(n++);~i&&(e=s%4?64*e+i:i,s++%4)?r+=String.fromCharCode(255&e>>(-2*s&6)):0)i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(i);return r};const F="pb_auth";class ie{constructor(){this.baseToken="",this.baseModel=null,this._onChangeCallbacks=[]}get token(){return this.baseToken}get model(){return this.baseModel}get isValid(){return!V(this.token)}get isAdmin(){return v(this.token).type==="admin"}get isAuthRecord(){return v(this.token).type==="authRecord"}save(t,e){this.baseToken=t||"",this.baseModel=e||null,this.triggerChange()}clear(){this.baseToken="",this.baseModel=null,this.triggerChange()}loadFromCookie(t,e=F){const i=X(t||"")[e]||"";let s={};try{s=JSON.parse(i),(typeof s===null||typeof s!="object"||Array.isArray(s))&&(s={})}catch{}this.save(s.token||"",s.model||null)}exportToCookie(t,e=F){const i={secure:!0,sameSite:!0,httpOnly:!0,path:"/"},s=v(this.token);i.expires=s?.exp?new Date(1e3*s.exp):new Date("1970-01-01"),t=Object.assign({},i,t);const n={token:this.token,model:this.model?JSON.parse(JSON.stringify(this.model)):null};let r=B(e,JSON.stringify(n),t);const a=typeof Blob<"u"?new Blob([r]).size:r.length;if(n.model&&a>4096){n.model={id:n?.model?.id,email:n?.model?.email};const c=["collectionId","username","verified"];for(const d in this.model)c.includes(d)&&(n.model[d]=this.model[d]);r=B(e,JSON.stringify(n),t)}return r}onChange(t,e=!1){return this._onChangeCallbacks.push(t),e&&t(this.token,this.model),()=>{for(let i=this._onChangeCallbacks.length-1;i>=0;i--)if(this._onChangeCallbacks[i]==t)return delete this._onChangeCallbacks[i],void this._onChangeCallbacks.splice(i,1)}}triggerChange(){for(const t of this._onChangeCallbacks)t&&t(this.token,this.model)}}class se extends ie{constructor(t="pocketbase_auth"){super(),this.storageFallback={},this.storageKey=t,this._bindStorageEvent()}get token(){return(this._storageGet(this.storageKey)||{}).token||""}get model(){return(this._storageGet(this.storageKey)||{}).model||null}save(t,e){this._storageSet(this.storageKey,{token:t,model:e}),super.save(t,e)}clear(){this._storageRemove(this.storageKey),super.clear()}_storageGet(t){if(typeof window<"u"&&window?.localStorage){const e=window.localStorage.getItem(t)||"";try{return JSON.parse(e)}catch{return e}}return this.storageFallback[t]}_storageSet(t,e){if(typeof window<"u"&&window?.localStorage){let i=e;typeof e!="string"&&(i=JSON.stringify(e)),window.localStorage.setItem(t,i)}else this.storageFallback[t]=e}_storageRemove(t){typeof window<"u"&&window?.localStorage&&window.localStorage?.removeItem(t),delete this.storageFallback[t]}_bindStorageEvent(){typeof window<"u"&&window?.localStorage&&window.addEventListener&&window.addEventListener("storage",t=>{if(t.key!=this.storageKey)return;const e=this._storageGet(this.storageKey)||{};super.save(e.token||"",e.model||null)})}}class L{constructor(t){this.client=t}}class ne extends L{async getAll(t){return t=Object.assign({method:"GET"},t),this.client.send("/api/settings",t)}async update(t,e){return e=Object.assign({method:"PATCH",body:t},e),this.client.send("/api/settings",e)}async testS3(t="storage",e){return e=Object.assign({method:"POST",body:{filesystem:t}},e),this.client.send("/api/settings/test/s3",e).then(()=>!0)}async testEmail(t,e,i){return i=Object.assign({method:"POST",body:{email:t,template:e}},i),this.client.send("/api/settings/test/email",i).then(()=>!0)}async generateAppleClientSecret(t,e,i,s,n,r){return r=Object.assign({method:"POST",body:{clientId:t,teamId:e,keyId:i,privateKey:s,duration:n}},r),this.client.send("/api/settings/apple/generate-client-secret",r)}}class j extends L{decode(t){return t}async getFullList(t,e){if(typeof t=="number")return this._getFullList(t,e);let i=500;return(e=Object.assign({},t,e)).batch&&(i=e.batch,delete e.batch),this._getFullList(i,e)}async getList(t=1,e=30,i){return(i=Object.assign({method:"GET"},i)).query=Object.assign({page:t,perPage:e},i.query),this.client.send(this.baseCrudPath,i).then(s=>(s.items=s.items?.map(n=>this.decode(n))||[],s))}async getFirstListItem(t,e){return(e=Object.assign({requestKey:"one_by_filter_"+this.baseCrudPath+"_"+t},e)).query=Object.assign({filter:t,skipTotal:1},e.query),this.getList(1,1,e).then(i=>{if(!i?.items?.length)throw new b({status:404,response:{code:404,message:"The requested resource wasn't found.",data:{}}});return i.items[0]})}async getOne(t,e){if(!t)throw new b({url:this.client.buildUrl(this.baseCrudPath+"/"),status:404,response:{code:404,message:"Missing required record id.",data:{}}});return e=Object.assign({method:"GET"},e),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(t),e).then(i=>this.decode(i))}async create(t,e){return e=Object.assign({method:"POST",body:t},e),this.client.send(this.baseCrudPath,e).then(i=>this.decode(i))}async update(t,e,i){return i=Object.assign({method:"PATCH",body:e},i),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(t),i).then(s=>this.decode(s))}async delete(t,e){return e=Object.assign({method:"DELETE"},e),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(t),e).then(()=>!0)}_getFullList(t=500,e){(e=e||{}).query=Object.assign({skipTotal:1},e.query);let i=[],s=async n=>this.getList(n,t||500,e).then(r=>{const a=r.items;return i=i.concat(a),a.length==r.perPage?s(n+1):i});return s(1)}}function m(o,t,e,i){const s=i!==void 0;return s||e!==void 0?s?(console.warn(o),t.body=Object.assign({},t.body,e),t.query=Object.assign({},t.query,i),t):Object.assign(t,e):t}function N(o){o._resetAutoRefresh?.()}class oe extends j{get baseCrudPath(){return"/api/admins"}async update(t,e,i){return super.update(t,e,i).then(s=>(this.client.authStore.model?.id===s.id&&this.client.authStore.model?.collectionId===void 0&&this.client.authStore.save(this.client.authStore.token,s),s))}async delete(t,e){return super.delete(t,e).then(i=>(i&&this.client.authStore.model?.id===t&&this.client.authStore.model?.collectionId===void 0&&this.client.authStore.clear(),i))}authResponse(t){const e=this.decode(t?.admin||{});return t?.token&&t?.admin&&this.client.authStore.save(t.token,e),Object.assign({},t,{token:t?.token||"",admin:e})}async authWithPassword(t,e,i,s){let n={method:"POST",body:{identity:t,password:e}};n=m("This form of authWithPassword(email, pass, body?, query?) is deprecated. Consider replacing it with authWithPassword(email, pass, options?).",n,i,s);const r=n.autoRefreshThreshold;delete n.autoRefreshThreshold,n.autoRefresh||N(this.client);let a=await this.client.send(this.baseCrudPath+"/auth-with-password",n);return a=this.authResponse(a),r&&function(d,h,y,u){N(d);const l=d.beforeSend,p=d.authStore.model,w=d.authStore.onChange((S,g)=>{(!S||g?.id!=p?.id||(g?.collectionId||p?.collectionId)&&g?.collectionId!=p?.collectionId)&&N(d)});d._resetAutoRefresh=function(){w(),d.beforeSend=l,delete d._resetAutoRefresh},d.beforeSend=async(S,g)=>{const Q=d.authStore.token;if(g.query?.autoRefresh)return l?l(S,g):{url:S,sendOptions:g};let q=d.authStore.isValid;if(q&&V(d.authStore.token,h))try{await y()}catch{q=!1}q||await u();const P=g.headers||{};for(let E in P)if(E.toLowerCase()=="authorization"&&Q==P[E]&&d.authStore.token){P[E]=d.authStore.token;break}return g.headers=P,l?l(S,g):{url:S,sendOptions:g}}}(this.client,r,()=>this.authRefresh({autoRefresh:!0}),()=>this.authWithPassword(t,e,Object.assign({autoRefresh:!0},n))),a}async authRefresh(t,e){let i={method:"POST"};return i=m("This form of authRefresh(body?, query?) is deprecated. Consider replacing it with authRefresh(options?).",i,t,e),this.client.send(this.baseCrudPath+"/auth-refresh",i).then(this.authResponse.bind(this))}async requestPasswordReset(t,e,i){let s={method:"POST",body:{email:t}};return s=m("This form of requestPasswordReset(email, body?, query?) is deprecated. Consider replacing it with requestPasswordReset(email, options?).",s,e,i),this.client.send(this.baseCrudPath+"/request-password-reset",s).then(()=>!0)}async confirmPasswordReset(t,e,i,s,n){let r={method:"POST",body:{token:t,password:e,passwordConfirm:i}};return r=m("This form of confirmPasswordReset(resetToken, password, passwordConfirm, body?, query?) is deprecated. Consider replacing it with confirmPasswordReset(resetToken, password, passwordConfirm, options?).",r,s,n),this.client.send(this.baseCrudPath+"/confirm-password-reset",r).then(()=>!0)}}const re=["requestKey","$cancelKey","$autoCancel","fetch","headers","body","query","params","cache","credentials","headers","integrity","keepalive","method","mode","redirect","referrer","referrerPolicy","signal","window"];function G(o){if(o){o.query=o.query||{};for(let t in o)re.includes(t)||(o.query[t]=o[t],delete o[t])}}class J extends L{constructor(){super(...arguments),this.clientId="",this.eventSource=null,this.subscriptions={},this.lastSentSubscriptions=[],this.maxConnectTimeout=15e3,this.reconnectAttempts=0,this.maxReconnectAttempts=1/0,this.predefinedReconnectIntervals=[200,300,500,1e3,1200,1500,2e3],this.pendingConnects=[]}get isConnected(){return!!this.eventSource&&!!this.clientId&&!this.pendingConnects.length}async subscribe(t,e,i){if(!t)throw new Error("topic must be set.");let s=t;if(i){G(i);const r="options="+encodeURIComponent(JSON.stringify({query:i.query,headers:i.headers}));s+=(s.includes("?")?"&":"?")+r}const n=function(r){const a=r;let c;try{c=JSON.parse(a?.data)}catch{}e(c||{})};return this.subscriptions[s]||(this.subscriptions[s]=[]),this.subscriptions[s].push(n),this.isConnected?this.subscriptions[s].length===1?await this.submitSubscriptions():this.eventSource?.addEventListener(s,n):await this.connect(),async()=>this.unsubscribeByTopicAndListener(t,n)}async unsubscribe(t){let e=!1;if(t){const i=this.getSubscriptionsByTopic(t);for(let s in i)if(this.hasSubscriptionListeners(s)){for(let n of this.subscriptions[s])this.eventSource?.removeEventListener(s,n);delete this.subscriptions[s],e||(e=!0)}}else this.subscriptions={};this.hasSubscriptionListeners()?e&&await this.submitSubscriptions():this.disconnect()}async unsubscribeByPrefix(t){let e=!1;for(let i in this.subscriptions)if((i+"?").startsWith(t)){e=!0;for(let s of this.subscriptions[i])this.eventSource?.removeEventListener(i,s);delete this.subscriptions[i]}e&&(this.hasSubscriptionListeners()?await this.submitSubscriptions():this.disconnect())}async unsubscribeByTopicAndListener(t,e){let i=!1;const s=this.getSubscriptionsByTopic(t);for(let n in s){if(!Array.isArray(this.subscriptions[n])||!this.subscriptions[n].length)continue;let r=!1;for(let a=this.subscriptions[n].length-1;a>=0;a--)this.subscriptions[n][a]===e&&(r=!0,delete this.subscriptions[n][a],this.subscriptions[n].splice(a,1),this.eventSource?.removeEventListener(n,e));r&&(this.subscriptions[n].length||delete this.subscriptions[n],i||this.hasSubscriptionListeners(n)||(i=!0))}this.hasSubscriptionListeners()?i&&await this.submitSubscriptions():this.disconnect()}hasSubscriptionListeners(t){if(this.subscriptions=this.subscriptions||{},t)return!!this.subscriptions[t]?.length;for(let e in this.subscriptions)if(this.subscriptions[e]?.length)return!0;return!1}async submitSubscriptions(){if(this.clientId)return this.addAllSubscriptionListeners(),this.lastSentSubscriptions=this.getNonEmptySubscriptionKeys(),this.client.send("/api/realtime",{method:"POST",body:{clientId:this.clientId,subscriptions:this.lastSentSubscriptions},requestKey:this.getSubscriptionsCancelKey()}).catch(t=>{if(!t?.isAbort)throw t})}getSubscriptionsCancelKey(){return"realtime_"+this.clientId}getSubscriptionsByTopic(t){const e={};t=t.includes("?")?t:t+"?";for(let i in this.subscriptions)(i+"?").startsWith(t)&&(e[i]=this.subscriptions[i]);return e}getNonEmptySubscriptionKeys(){const t=[];for(let e in this.subscriptions)this.subscriptions[e].length&&t.push(e);return t}addAllSubscriptionListeners(){if(this.eventSource){this.removeAllSubscriptionListeners();for(let t in this.subscriptions)for(let e of this.subscriptions[t])this.eventSource.addEventListener(t,e)}}removeAllSubscriptionListeners(){if(this.eventSource)for(let t in this.subscriptions)for(let e of this.subscriptions[t])this.eventSource.removeEventListener(t,e)}async connect(){if(!(this.reconnectAttempts>0))return new Promise((t,e)=>{this.pendingConnects.push({resolve:t,reject:e}),this.pendingConnects.length>1||this.initConnect()})}initConnect(){this.disconnect(!0),clearTimeout(this.connectTimeoutId),this.connectTimeoutId=setTimeout(()=>{this.connectErrorHandler(new Error("EventSource connect took too long."))},this.maxConnectTimeout),this.eventSource=new EventSource(this.client.buildUrl("/api/realtime")),this.eventSource.onerror=t=>{this.connectErrorHandler(new Error("Failed to establish realtime connection."))},this.eventSource.addEventListener("PB_CONNECT",t=>{const e=t;this.clientId=e?.lastEventId,this.submitSubscriptions().then(async()=>{let i=3;for(;this.hasUnsentSubscriptions()&&i>0;)i--,await this.submitSubscriptions()}).then(()=>{for(let s of this.pendingConnects)s.resolve();this.pendingConnects=[],this.reconnectAttempts=0,clearTimeout(this.reconnectTimeoutId),clearTimeout(this.connectTimeoutId);const i=this.getSubscriptionsByTopic("PB_CONNECT");for(let s in i)for(let n of i[s])n(t)}).catch(i=>{this.clientId="",this.connectErrorHandler(i)})})}hasUnsentSubscriptions(){const t=this.getNonEmptySubscriptionKeys();if(t.length!=this.lastSentSubscriptions.length)return!0;for(const e of t)if(!this.lastSentSubscriptions.includes(e))return!0;return!1}connectErrorHandler(t){if(clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),!this.clientId&&!this.reconnectAttempts||this.reconnectAttempts>this.maxReconnectAttempts){for(let i of this.pendingConnects)i.reject(new b(t));return this.pendingConnects=[],void this.disconnect()}this.disconnect(!0);const e=this.predefinedReconnectIntervals[this.reconnectAttempts]||this.predefinedReconnectIntervals[this.predefinedReconnectIntervals.length-1];this.reconnectAttempts++,this.reconnectTimeoutId=setTimeout(()=>{this.initConnect()},e)}disconnect(t=!1){if(clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),this.removeAllSubscriptionListeners(),this.client.cancelRequest(this.getSubscriptionsCancelKey()),this.eventSource?.close(),this.eventSource=null,this.clientId="",!t){this.reconnectAttempts=0;for(let e of this.pendingConnects)e.resolve();this.pendingConnects=[]}}}class ae extends j{constructor(t,e){super(t),this.collectionIdOrName=e}get baseCrudPath(){return this.baseCollectionPath+"/records"}get baseCollectionPath(){return"/api/collections/"+encodeURIComponent(this.collectionIdOrName)}async subscribe(t,e,i){if(!t)throw new Error("Missing topic.");if(!e)throw new Error("Missing subscription callback.");return this.client.realtime.subscribe(this.collectionIdOrName+"/"+t,e,i)}async unsubscribe(t){return t?this.client.realtime.unsubscribe(this.collectionIdOrName+"/"+t):this.client.realtime.unsubscribeByPrefix(this.collectionIdOrName)}async getFullList(t,e){if(typeof t=="number")return super.getFullList(t,e);const i=Object.assign({},t,e);return super.getFullList(i)}async getList(t=1,e=30,i){return super.getList(t,e,i)}async getFirstListItem(t,e){return super.getFirstListItem(t,e)}async getOne(t,e){return super.getOne(t,e)}async create(t,e){return super.create(t,e)}async update(t,e,i){return super.update(t,e,i).then(s=>(this.client.authStore.model?.id!==s?.id||this.client.authStore.model?.collectionId!==this.collectionIdOrName&&this.client.authStore.model?.collectionName!==this.collectionIdOrName||this.client.authStore.save(this.client.authStore.token,s),s))}async delete(t,e){return super.delete(t,e).then(i=>(!i||this.client.authStore.model?.id!==t||this.client.authStore.model?.collectionId!==this.collectionIdOrName&&this.client.authStore.model?.collectionName!==this.collectionIdOrName||this.client.authStore.clear(),i))}authResponse(t){const e=this.decode(t?.record||{});return this.client.authStore.save(t?.token,e),Object.assign({},t,{token:t?.token||"",record:e})}async listAuthMethods(t){return t=Object.assign({method:"GET"},t),this.client.send(this.baseCollectionPath+"/auth-methods",t).then(e=>Object.assign({},e,{usernamePassword:!!e?.usernamePassword,emailPassword:!!e?.emailPassword,authProviders:Array.isArray(e?.authProviders)?e?.authProviders:[]}))}async authWithPassword(t,e,i,s){let n={method:"POST",body:{identity:t,password:e}};return n=m("This form of authWithPassword(usernameOrEmail, pass, body?, query?) is deprecated. Consider replacing it with authWithPassword(usernameOrEmail, pass, options?).",n,i,s),this.client.send(this.baseCollectionPath+"/auth-with-password",n).then(r=>this.authResponse(r))}async authWithOAuth2Code(t,e,i,s,n,r,a){let c={method:"POST",body:{provider:t,code:e,codeVerifier:i,redirectUrl:s,createData:n}};return c=m("This form of authWithOAuth2Code(provider, code, codeVerifier, redirectUrl, createData?, body?, query?) is deprecated. Consider replacing it with authWithOAuth2Code(provider, code, codeVerifier, redirectUrl, createData?, options?).",c,r,a),this.client.send(this.baseCollectionPath+"/auth-with-oauth2",c).then(d=>this.authResponse(d))}async authWithOAuth2(...t){if(t.length>1||typeof t?.[0]=="string")return console.warn("PocketBase: This form of authWithOAuth2() is deprecated and may get removed in the future. Please replace with authWithOAuth2Code() OR use the authWithOAuth2() realtime form as shown in https://pocketbase.io/docs/authentication/#oauth2-integration."),this.authWithOAuth2Code(t?.[0]||"",t?.[1]||"",t?.[2]||"",t?.[3]||"",t?.[4]||{},t?.[5]||{},t?.[6]||{});const e=t?.[0]||{},i=(await this.listAuthMethods()).authProviders.find(c=>c.name===e.provider);if(!i)throw new b(new Error(`Missing or invalid provider "${e.provider}".`));const s=this.client.buildUrl("/api/oauth2-redirect"),n=new J(this.client);let r=null;function a(){r?.close(),n.unsubscribe()}return e.urlCallback||(r=M(void 0)),new Promise(async(c,d)=>{try{await n.subscribe("@oauth2",async l=>{const p=n.clientId;try{if(!l.state||p!==l.state)throw new Error("State parameters don't match.");if(l.error||!l.code)throw new Error("OAuth2 redirect error or missing code: "+l.error);const w=Object.assign({},e);delete w.provider,delete w.scopes,delete w.createData,delete w.urlCallback;const S=await this.authWithOAuth2Code(i.name,l.code,i.codeVerifier,s,e.createData,w);c(S)}catch(w){d(new b(w))}a()});const h={state:n.clientId};e.scopes?.length&&(h.scope=e.scopes.join(" "));const y=this._replaceQueryParams(i.authUrl+s,h);await(e.urlCallback||function(l){r?r.location.href=l:r=M(l)})(y)}catch(h){a(),d(new b(h))}})}async authRefresh(t,e){let i={method:"POST"};return i=m("This form of authRefresh(body?, query?) is deprecated. Consider replacing it with authRefresh(options?).",i,t,e),this.client.send(this.baseCollectionPath+"/auth-refresh",i).then(s=>this.authResponse(s))}async requestPasswordReset(t,e,i){let s={method:"POST",body:{email:t}};return s=m("This form of requestPasswordReset(email, body?, query?) is deprecated. Consider replacing it with requestPasswordReset(email, options?).",s,e,i),this.client.send(this.baseCollectionPath+"/request-password-reset",s).then(()=>!0)}async confirmPasswordReset(t,e,i,s,n){let r={method:"POST",body:{token:t,password:e,passwordConfirm:i}};return r=m("This form of confirmPasswordReset(token, password, passwordConfirm, body?, query?) is deprecated. Consider replacing it with confirmPasswordReset(token, password, passwordConfirm, options?).",r,s,n),this.client.send(this.baseCollectionPath+"/confirm-password-reset",r).then(()=>!0)}async requestVerification(t,e,i){let s={method:"POST",body:{email:t}};return s=m("This form of requestVerification(email, body?, query?) is deprecated. Consider replacing it with requestVerification(email, options?).",s,e,i),this.client.send(this.baseCollectionPath+"/request-verification",s).then(()=>!0)}async confirmVerification(t,e,i){let s={method:"POST",body:{token:t}};return s=m("This form of confirmVerification(token, body?, query?) is deprecated. Consider replacing it with confirmVerification(token, options?).",s,e,i),this.client.send(this.baseCollectionPath+"/confirm-verification",s).then(()=>{const n=v(t),r=this.client.authStore.model;return r&&!r.verified&&r.id===n.id&&r.collectionId===n.collectionId&&(r.verified=!0,this.client.authStore.save(this.client.authStore.token,r)),!0})}async requestEmailChange(t,e,i){let s={method:"POST",body:{newEmail:t}};return s=m("This form of requestEmailChange(newEmail, body?, query?) is deprecated. Consider replacing it with requestEmailChange(newEmail, options?).",s,e,i),this.client.send(this.baseCollectionPath+"/request-email-change",s).then(()=>!0)}async confirmEmailChange(t,e,i,s){let n={method:"POST",body:{token:t,password:e}};return n=m("This form of confirmEmailChange(token, password, body?, query?) is deprecated. Consider replacing it with confirmEmailChange(token, password, options?).",n,i,s),this.client.send(this.baseCollectionPath+"/confirm-email-change",n).then(()=>{const r=v(t),a=this.client.authStore.model;return a&&a.id===r.id&&a.collectionId===r.collectionId&&this.client.authStore.clear(),!0})}async listExternalAuths(t,e){return e=Object.assign({method:"GET"},e),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(t)+"/external-auths",e)}async unlinkExternalAuth(t,e,i){return i=Object.assign({method:"DELETE"},i),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(t)+"/external-auths/"+encodeURIComponent(e),i).then(()=>!0)}_replaceQueryParams(t,e={}){let i=t,s="";t.indexOf("?")>=0&&(i=t.substring(0,t.indexOf("?")),s=t.substring(t.indexOf("?")+1));const n={},r=s.split("&");for(const a of r){if(a=="")continue;const c=a.split("=");n[decodeURIComponent(c[0].replace(/\+/g," "))]=decodeURIComponent((c[1]||"").replace(/\+/g," "))}for(let a in e)e.hasOwnProperty(a)&&(e[a]==null?delete n[a]:n[a]=e[a]);s="";for(let a in n)n.hasOwnProperty(a)&&(s!=""&&(s+="&"),s+=encodeURIComponent(a.replace(/%20/g,"+"))+"="+encodeURIComponent(n[a].replace(/%20/g,"+")));return s!=""?i+"?"+s:i}}function M(o){if(typeof window>"u"||!window?.open)throw new b(new Error("Not in a browser context - please pass a custom urlCallback function."));let t=1024,e=768,i=window.innerWidth,s=window.innerHeight;t=t>i?i:t,e=e>s?s:e;let n=i/2-t/2,r=s/2-e/2;return window.open(o,"popup_window","width="+t+",height="+e+",top="+r+",left="+n+",resizable,menubar=no")}class le extends j{get baseCrudPath(){return"/api/collections"}async import(t,e=!1,i){return i=Object.assign({method:"PUT",body:{collections:t,deleteMissing:e}},i),this.client.send(this.baseCrudPath+"/import",i).then(()=>!0)}}class ce extends L{async getList(t=1,e=30,i){return(i=Object.assign({method:"GET"},i)).query=Object.assign({page:t,perPage:e},i.query),this.client.send("/api/logs",i)}async getOne(t,e){if(!t)throw new b({url:this.client.buildUrl("/api/logs/"),status:404,response:{code:404,message:"Missing required log id.",data:{}}});return e=Object.assign({method:"GET"},e),this.client.send("/api/logs/"+encodeURIComponent(t),e)}async getStats(t){return t=Object.assign({method:"GET"},t),this.client.send("/api/logs/stats",t)}}class de extends L{async check(t){return t=Object.assign({method:"GET"},t),this.client.send("/api/health",t)}}class ue extends L{getUrl(t,e,i={}){if(!e||!t?.id||!t?.collectionId&&!t?.collectionName)return"";const s=[];s.push("api"),s.push("files"),s.push(encodeURIComponent(t.collectionId||t.collectionName)),s.push(encodeURIComponent(t.id)),s.push(encodeURIComponent(e));let n=this.client.buildUrl(s.join("/"));if(Object.keys(i).length){i.download===!1&&delete i.download;const r=new URLSearchParams(i);n+=(n.includes("?")?"&":"?")+r}return n}async getToken(t){return t=Object.assign({method:"POST"},t),this.client.send("/api/files/token",t).then(e=>e?.token||"")}}class he extends L{async getFullList(t){return t=Object.assign({method:"GET"},t),this.client.send("/api/backups",t)}async create(t,e){return e=Object.assign({method:"POST",body:{name:t}},e),this.client.send("/api/backups",e).then(()=>!0)}async upload(t,e){return e=Object.assign({method:"POST",body:t},e),this.client.send("/api/backups/upload",e).then(()=>!0)}async delete(t,e){return e=Object.assign({method:"DELETE"},e),this.client.send(`/api/backups/${encodeURIComponent(t)}`,e).then(()=>!0)}async restore(t,e){return e=Object.assign({method:"POST"},e),this.client.send(`/api/backups/${encodeURIComponent(t)}/restore`,e).then(()=>!0)}getDownloadUrl(t,e){return this.client.buildUrl(`/api/backups/${encodeURIComponent(e)}?token=${encodeURIComponent(t)}`)}}class f{constructor(t="/",e,i="en-US"){this.cancelControllers={},this.recordServices={},this.enableAutoCancellation=!0,this.baseUrl=t,this.lang=i,this.authStore=e||new se,this.admins=new oe(this),this.collections=new le(this),this.files=new ue(this),this.logs=new ce(this),this.settings=new ne(this),this.realtime=new J(this),this.health=new de(this),this.backups=new he(this)}collection(t){return this.recordServices[t]||(this.recordServices[t]=new ae(this,t)),this.recordServices[t]}autoCancellation(t){return this.enableAutoCancellation=!!t,this}cancelRequest(t){return this.cancelControllers[t]&&(this.cancelControllers[t].abort(),delete this.cancelControllers[t]),this}cancelAllRequests(){for(let t in this.cancelControllers)this.cancelControllers[t].abort();return this.cancelControllers={},this}filter(t,e){if(!e)return t;for(let i in e){let s=e[i];switch(typeof s){case"boolean":case"number":s=""+s;break;case"string":s="'"+s.replace(/'/g,"\\'")+"'";break;default:s=s===null?"null":s instanceof Date?"'"+s.toISOString().replace("T"," ")+"'":"'"+JSON.stringify(s).replace(/'/g,"\\'")+"'"}t=t.replaceAll("{:"+i+"}",s)}return t}getFileUrl(t,e,i={}){return this.files.getUrl(t,e,i)}buildUrl(t){let e=this.baseUrl;return typeof window>"u"||!window.location||e.startsWith("https://")||e.startsWith("http://")||(e=window.location.origin?.endsWith("/")?window.location.origin.substring(0,window.location.origin.length-1):window.location.origin||"",this.baseUrl.startsWith("/")||(e+=window.location.pathname||"/",e+=e.endsWith("/")?"":"/"),e+=this.baseUrl),t&&(e+=e.endsWith("/")?"":"/",e+=t.startsWith("/")?t.substring(1):t),e}async send(t,e){e=this.initSendOptions(t,e);let i=this.buildUrl(t);if(this.beforeSend){const s=Object.assign({},await this.beforeSend(i,e));s.url!==void 0||s.options!==void 0?(i=s.url||i,e=s.options||e):Object.keys(s).length&&(e=s,console?.warn&&console.warn("Deprecated format of beforeSend return: please use `return { url, options }`, instead of `return options`."))}if(e.query!==void 0){const s=this.serializeQueryParams(e.query);s&&(i+=(i.includes("?")?"&":"?")+s),delete e.query}return this.getHeader(e.headers,"Content-Type")=="application/json"&&e.body&&typeof e.body!="string"&&(e.body=JSON.stringify(e.body)),(e.fetch||fetch)(i,e).then(async s=>{let n={};try{n=await s.json()}catch{}if(this.afterSend&&(n=await this.afterSend(s,n)),s.status>=400)throw new b({url:s.url,status:s.status,data:n});return n}).catch(s=>{throw new b(s)})}initSendOptions(t,e){if((e=Object.assign({method:"GET"},e)).body=this.convertToFormDataIfNeeded(e.body),G(e),e.query=Object.assign({},e.params,e.query),e.requestKey===void 0&&(e.$autoCancel===!1||e.query.$autoCancel===!1?e.requestKey=null:(e.$cancelKey||e.query.$cancelKey)&&(e.requestKey=e.$cancelKey||e.query.$cancelKey)),delete e.$autoCancel,delete e.query.$autoCancel,delete e.$cancelKey,delete e.query.$cancelKey,this.getHeader(e.headers,"Content-Type")!==null||this.isFormData(e.body)||(e.headers=Object.assign({},e.headers,{"Content-Type":"application/json"})),this.getHeader(e.headers,"Accept-Language")===null&&(e.headers=Object.assign({},e.headers,{"Accept-Language":this.lang})),this.authStore.token&&this.getHeader(e.headers,"Authorization")===null&&(e.headers=Object.assign({},e.headers,{Authorization:this.authStore.token})),this.enableAutoCancellation&&e.requestKey!==null){const i=e.requestKey||(e.method||"GET")+t;delete e.requestKey,this.cancelRequest(i);const s=new AbortController;this.cancelControllers[i]=s,e.signal=s.signal}return e}convertToFormDataIfNeeded(t){if(typeof FormData>"u"||t===void 0||typeof t!="object"||t===null||this.isFormData(t)||!this.hasBlobField(t))return t;const e=new FormData;for(const i in t){const s=t[i];if(typeof s!="object"||this.hasBlobField({data:s})){const n=Array.isArray(s)?s:[s];for(let r of n)e.append(i,r)}else{let n={};n[i]=s,e.append("@jsonPayload",JSON.stringify(n))}}return e}hasBlobField(t){for(const e in t){const i=Array.isArray(t[e])?t[e]:[t[e]];for(const s of i)if(typeof Blob<"u"&&s instanceof Blob||typeof File<"u"&&s instanceof File)return!0}return!1}getHeader(t,e){t=t||{},e=e.toLowerCase();for(let i in t)if(i.toLowerCase()==e)return t[i];return null}isFormData(t){return t&&(t.constructor.name==="FormData"||typeof FormData<"u"&&t instanceof FormData)}serializeQueryParams(t){const e=[];for(const i in t){if(t[i]===null)continue;const s=t[i],n=encodeURIComponent(i);if(Array.isArray(s))for(const r of s)e.push(n+"="+encodeURIComponent(r));else s instanceof Date?e.push(n+"="+encodeURIComponent(s.toISOString())):typeof s!==null&&typeof s=="object"?e.push(n+"="+encodeURIComponent(JSON.stringify(s))):e.push(n+"="+encodeURIComponent(s))}return e.join("&")}}function pe(o,t,e){o.addEventListener("submit",i=>{i.preventDefault();const s=new FormData(i.target),n=s.get("noteTitle"),r=s.get("noteText"),a=s.get("noteDeadline");fe(n,r,a,t,e)})}async function fe(o,t,e,i,s){const n=new f("http://localhost:8090");if(i!==null){const r={title:o,text:t,deadline:e,finished:!1,freeze:!1,sortBottom:!1,list:i,user:s};await n.collection("notes").create(r),location.reload(!1)}}function T(o,t){const e="modal-is-open",i="modal-is-opening",s="modal-is-closing",n="--pico-scrollbar-width";let a=null;o.addEventListener("click",u=>{u.preventDefault();const l=document.getElementById(u.currentTarget.dataset.target);l&&l&&(c(l)?h(l):d(l))});const c=u=>u.hasAttribute("open")&&u.getAttribute("open")!=="false",d=u=>{const{documentElement:l}=document,p=y();p&&l.style.setProperty(n,`${p}px`),l.classList.add(e,i),setTimeout(()=>{a=u,l.classList.remove(i)},0),u.setAttribute("open",!0)},h=u=>{a=null;const{documentElement:l}=document;l.classList.add(s),setTimeout(()=>{l.classList.remove(s,e),l.style.removeProperty(n),u.removeAttribute("open")},0)};document.addEventListener("click",u=>{if(a===null)return;!a.querySelector("article").contains(u.target)&&h(a)}),document.addEventListener("keydown",u=>{u.key==="Escape"&&a&&h(a)});const y=()=>window.innerWidth-document.documentElement.clientWidth}function me(o){o!==null&&o.forEach(t=>{t.addEventListener("click",e=>{if(confirm(`Are you sure?          
When you DELETE this note you have NO chance to get it back!          
Be realy sure if you want to delete it!`))e.preventDefault(),be(t.id);else return})})}async function be(o){await new f("http://localhost:8090").collection("notes").delete(o),location.reload(!1)}const ge=new f("http://localhost:8090");async function ye(o){o.forEach(t=>{we(t)})}function we(o){o.addEventListener("submit",async t=>{t.preventDefault();const e=new FormData(t.target),i=o.id,s=e.get("newNoteTitle"),n=e.get("newNoteText"),r=e.get("newNoteDeadline"),a={title:s,text:n,deadline:r,finished:!1,freeze:!1,sortBottom:!1};await ge.collection("notes").update(i,a),location.reload(!1)})}const Se=new f("http://localhost:8090");async function Ce(o){o.forEach(t=>{Le(t)})}function Le(o){o.addEventListener("click",async t=>{t.preventDefault();const e=o.id,s={finished:!0,finishedDate:new Date,freeze:!1,sortBottom:!0};await Se.collection("notes").update(e,s),location.reload(!1)})}const ve=new f("http://localhost:8090");async function Pe(o){o.forEach(t=>{Ee(t)})}function Ee(o){o.addEventListener("click",async t=>{t.preventDefault();const e=o.id,i={finished:!1,finishedDate:NaN,finished:!1,sortBottom:!1};await ve.collection("notes").update(e,i),location.reload(!1)})}const Oe=new f("http://localhost:8090");async function Te(o){o.forEach(t=>{ke(t)})}function ke(o){o.addEventListener("click",async t=>{t.preventDefault();const e=o.id,s={finished:!1,freezeDate:new Date,freeze:!0,sortBottom:!0};await Oe.collection("notes").update(e,s),location.reload(!1)})}const De=new f("http://localhost:8090");async function Ae(o){o.forEach(t=>{Ie(t)})}function Ie(o){o.addEventListener("click",async t=>{t.preventDefault();const e=o.id,i={finished:!1,freezeDate:NaN,freeze:!1,sortBottom:!1};await De.collection("notes").update(e,i),location.reload(!1)})}function qe(o){o.addEventListener("submit",function(t){t.preventDefault();const i=new URLSearchParams(window.location.search).get("selectedUserID");let s=this.select.value;location.href="/index.html?selectedUserID="+i+"&selectedListID="+encodeURIComponent(s)})}const Ne=new f("http://localhost:8090");async function xe(o){o.forEach(t=>{let e=t.querySelector('select[id="selectNewList"]');if(e){let i=e.value;Re(t,i)}else return})}function Re(o,t){o.addEventListener("submit",async e=>{e.preventDefault();const i=o.id;let s="";s=i.replace("-","");const n={list:t};await Ne.collection("notes").update(s,n),location.reload(!1)})}function $e(o){o.addEventListener("submit",t=>{t.preventDefault();const i=new FormData(t.target).get("createListName");let n=new URLSearchParams(window.location.search).get("selectedUserID");Ue(i,n)})}async function Ue(o,t){const e=new f("http://localhost:8090");await e.collection("list").create({name:o,user:t}),(await e.collection("list").getFullList()).forEach(n=>location.href="/index.html?selectedUserID="+t+"&selectedValue="+n.id)}const x=new f("http://localhost:8090");function je(o){o.addEventListener("click",t=>{t.preventDefault(),Be()})}async function Be(){let o=new URLSearchParams(window.location.search),t=o.get("selectedListID");t==null&&(t=o.get("select"));let e=o.get("selectedUserID");confirm("When You delete the note list you'l never get it back! All your notes of this list will be gone!")&&((await x.collection("notes").getFullList()).forEach(async s=>{s.list==t&&await x.collection("notes").delete(s.id)}),await x.collection("list").delete(t),location.href="/index.html?selectedUserID="+e)}function Fe(o){o.addEventListener("submit",t=>{t.preventDefault();const i=new FormData(t.target).get("renameList");let n=new URLSearchParams(window.location.search).get("selectedValue");Me(n,i)})}async function Me(o,t){const e=new f("http://localhost:8090"),i={name:t};await e.collection("list").update(o,i),location.href="/index.html?selectedValue="+o}function ze(o){let t=new Date(o),e=new Date;return t.setHours(0,0,0,0),e.setHours(0,0,0,0),e<t}const Z=new f(""http://localhost:8090"/");await Z.collection("users").getFullList({sort:"-created"});function We(o){o.addEventListener("submit",t=>{t.preventDefault();const e=new FormData(t.target),i=e.get("createAccountName"),s=e.get("createAccountEmail"),n=e.get("createAccountPassword"),r=e.get("createAccountConfirmPassword");Ke(i.replaceAll(" ",""),s.toLocaleLowerCase(),n,r)})}async function Ke(o,t,e,i){if(e===i){const s={username:o,email:t,password:e,passwordConfirm:i,emailVisibility:!0};try{const n=await Z.collection("users").create(s);location.href="/index.html?selectedUserID="+n.id}catch{alert("Account already exists with that email address, or name! Please login or use a different email address.")}}else alert("Passwords do not match")}function _e(o){o.addEventListener("submit",t=>{t.preventDefault();const e=new FormData(t.target),i=e.get("loginEmail"),s=e.get("loginPassword");He(i.toLowerCase(),s)})}async function He(o,t){const e=new f("http://localhost:8090");try{const i=await e.collection("users").authWithPassword(o,t);location.href="/index.html?selectedUserID="+i.record.id}catch{alert("Invalid email or password")}}function Ve(o){o.addEventListener("click",t=>{if(t.preventDefault(),confirm("Are you sure you want to log out?"))location.href="/index.html";else return})}function Ge(o,t,e){let i=t/e*100;o.style.width=i+"%",i>=2&&(o.innerHTML=Math.round(i)+"%")}const I=new f(""http://localhost:8090"/");let Y=new URLSearchParams(window.location.search),k=Y.get("selectedUserID"),D=Y.get("selectedListID"),C=null;const Je=await I.collection("notes").getFullList({sort:"sortBottom"}),Ze=await I.collection("list").getFullList({sort:"updated"});let R=[],A=[],$=[],z=[],W="",K=0,_=0,U="";if(k!==null){z=Ze.filter(e=>e.user===k),R=Je.filter(e=>e.list===D),W=(await I.collection("users").getOne(k,{})).username,D!==null&&(C=(await I.collection("list").getOne(D,{})).name),R.forEach(e=>{e.finished&&_++,K++}),z.forEach(e=>{$.push(`
    <option value="${e.id}">${e.name}</option>
`)}),R.forEach(e=>{new Date().toLocaleString("de-DE",{timeZone:"Europe/Berlin",day:"2-digit",month:"2-digit",year:"numeric"}),new Date(e.deadline).toLocaleString("de-DE",{timeZone:"Europe/Berlin",day:"2-digit",month:"2-digit",year:"numeric"});const i=new Date(e.created).toLocaleString("de-DE",{timeZone:"Europe/Berlin",weekday:"long",hour:"2-digit",minute:"2-digit",day:"2-digit",month:"short",year:"numeric"})+" Uhr",s=new Date(e.deadline).toLocaleString("de-DE",{timeZone:"Europe/Berlin",weekday:"long",day:"2-digit",month:"short",year:"numeric"}),n=new Date(e.finishedDate).toLocaleString("de-DE",{timeZone:"Europe/Berlin",weekday:"long",hour:"2-digit",minute:"2-digit",day:"2-digit",month:"short",year:"numeric"})+" Uhr",r=new Date(e.freezeDate).toLocaleString("de-DE",{timeZone:"Europe/Berlin",weekday:"long",hour:"2-digit",minute:"2-digit",day:"2-digit",month:"short",year:"numeric"})+" Uhr",a=new Date(e.updated).toLocaleString("de-DE",{timeZone:"Europe/Berlin",weekday:"long",hour:"2-digit",minute:"2-digit",day:"2-digit",month:"short",year:"numeric"})+" Uhr";let c=[],d=[],h=[],y="",u=[],l="",p="";if(ze(e.deadline)?(l="no",p="The deadline you've set"):(l="deadlineIsOver",p="Your time is over set a new deadline or mark the note as finsihed"),!(e.finished&&e.freeze)){switch(e.created===e.updated){case!0:u.push(`
      <p id="noteDate"><span id="datePrefix">Created: </span>${i}</p>
      `);break;case!1:u.push(`
        <p id="noteDate"><span id="datePrefix">Updated: </span>${a}</p>
      `);break}switch(e.finished&&!e.freeze?(y="finished",c.push(`
    <i class="fa-solid fa-square-check" id="headerPrefixCheck"></i>
    `),h.push(`
    <li><button id ="${e.id}" class="deleteButton" type="button" data-tooltip="Delete the current note"><i class="fa-solid fa-triangle-exclamation"></i></button></li>
    <li><button id ="${e.id}" class="unfinishButton" type="button" data-tooltip="Mark the note as unfinished"><i class="fa-solid fa-hourglass-start"></i></button></li>
    `),d.push(`
    <p id="noteDeadline"><span id="deadlinePrefix">Finished: </span> ${n}</p>
    ${u}
    `)):!e.finished&&!e.freeze?(c.push(`
    <i class="fa-solid fa-hourglass-start" id="headerPrefixHourglassStart"></i>
    `),h.push(`
    <li><button id ="${e.id}" class="finishButton" type="button" data-tooltip="Mark the note as finished"><i class="fa-solid fa-trophy"></i></button></li>
    <li><button id ="${e.id}" class="freezeButton" type="button" data-tooltip="Mark the note as freezed"><i class="fa-solid fa-snowflake"></i></button></li>
    `),d.push(`
    <p id="noteDeadline"><span id="deadlinePrefix" data-tooltip="${p}">Deadline: </span><span id="${l}" data-tooltip="${p}"> ${s}</span></p>
    ${u}
    `)):e.freeze&&!e.finished?(y="freeze",c.push(`
    <i class="fa-solid fa-lock" id="headerPrefixLock"></i>
    `),h.push(`
    <li><button id ="${e.id}" class="deleteButton" type="button" data-tooltip="Delete the current note"><i class="fa-solid fa-triangle-exclamation"></i></button></li>
    <li><button id ="${e.id}" class="unfreezeButton" type="button" data-tooltip="Mark the note as not freezed"><i class="fa-solid fa-backward"></i></button></li>
    `),d.push(`
    <p id="noteDeadline"><span id="deadlinePrefix">Freezed: </span> ${r}</p>
    ${u}
    `)):!e.freeze&&!e.finished&&(c.push(`
    <i class="fa-solid fa-hourglass-start" id="headerPrefixHourglassStart"></i>
    `),h.push(`
    <li><button id ="${e.id}" class="finishButton" type="button" data-tooltip="Mark the note as finished"><i class="fa-solid fa-trophy"></i></button></li>
    <li><button id ="${e.id}" class="freezeButton" type="button" data-tooltip="Mark the note as freezed"><i class="fa-solid fa-snowflake"></i></button></li>
    `),d.push(`
    <p id="noteDeadline"><span id="deadlinePrefix">Deadline: </span><span id="${l}"> ${s}</span></p>
    ${u}
    `)),A.push(`
        <dialog id="${e.id}">
        <article>
          <header>
            <h3>Update</h3>
          </header>
          <form id=${e.id} class="updateNote" action=""> 
          <label for="newNoteTitle">Title </label><input type="text" class="form-control" value="${e.title}" placeholder="Title..." id="newNoteTitle" maxlength="20" name="newNoteTitle">
          <label for="newNoteText">Text </label><input type="text" class="form-control" value="${e.text}" placeholder="Text..." id="newNoteText" name="newNoteText">
          <label for="newNoteDeadline">Deadline </label><input type="date"  class="form-control" value="${e.deadline}" id="newNoteDeadline..." name="newNoteDeadline" required>
            <button type="submit" data-tooltip="Update the note" id="${e.id}"><i class="fa-solid fa-retweet"></i></button>
          </form>
        </article>
      </dialog>
      <dialog id="${e.id}-">
        <article>
          <header>
            <h3>Update</h3>
          </header>
          <form id="${e.id}-" class="updateNoteList" action=""> 
            <select name="selectNewList" aria-label="Select" id="selectNewList"required>
              <option selected disabled value="">${C}</option>
              ${$}
            </select>
            <button type="submit" data-tooltip="Update the note list" id="${e.id}"><i class="fa-solid fa-retweet"></i></button>
          </form>
        </article>
      </dialog>
      `),e.created===e.updated){case!0:A.push(`
               <article class="noteList " id="${e.id}">
                <header class="noteListHeader">
                  <ul class="delete">
                    ${h}
                  <li>
                    <button class="updateModalButton" id="${e.id}" data-target="${e.id}" type="button" data-tooltip="Update the note"><i class="fa-solid fa-retweet"></i>
                  </li>
                  <li>
                  <button class="cahngeListModalButton" data-target="${e.id}-" type="button" data-tooltip="Change the current List of he modal"><i class="fa-solid fa-arrow-right-arrow-left"></i>
                </li>
                  </ul>
                  ${c}
                  <h5 class="noteHeader" id="${e.id}">${e.title}</h5>
                </header>
              <body>
              <p class="${y}" id="noteText ${e.id}">${e.text}</p>
              </body>
              <footer>
                ${d}
              </footer>
            </article>
          `);break;case!1:A.push(`
              <article class="noteList" id="${e.id}">
              <header class="noteListHeader">
              <ul class="delete">
                  <li>
                    ${h}
                  </li>
                  <li>
                  <button class="updateModalButton" data-target="${e.id}" type="button" data-tooltip="Update the note"><i class="fa-solid fa-retweet"></i>
                </li>
                <li>
                  <button class="cahngeListModalButton" data-target="${e.id}-" type="button" data-tooltip="Change the current List of he modal"><i class="fa-solid fa-arrow-right-arrow-left"></i>
                </li>
              </ul>
                  ${c}
                <h5 class="noteHeader" id="${e.id}-title">${e.title}</h5>
                
              </header>
              <body>
              <p class="${y}" id="noteText ${e.id}-text">${e.text}</p>
              </body>
              <footer>
                ${d}
              </footer>
            </article>
          `);break}}}),C==null?(U="Disabled",C="Select your list"):U="Create a new note",document.querySelector("#app").innerHTML=`
      
      <div class="topBar">
        <section id="createS">
          <h2>Welcome Back:<br><span id="accountNameH1">${W}</span></h2>
          <button type="button" id="logOut" data-tooltip="Logout of your Account"><i class="fa-solid fa-arrow-right-from-bracket"></i></button>
          <h2>${C}</h2>
          <ul id="startList">
          <li id="startItem">
            <button id="switchList" type="button" data-target="selectListModal" data-tooltip="Switch between your list">${C}</button>
          </li>
          <li id="startItem">
            <button id ="createNote" data-target="createModal" type="button" data-tooltip="${U}"><i class="fa-solid fa-plus" id="plusFA"></i></button>
          </li>  
          <li id="startItem">
            <button id="manageList" data-target="manageLisModal" type="button" data-tooltip="Manage your lists"><i class="fa-solid fa-gear"></i></button>   
          </li>   
          </ul>
          <div id="myProgress"><div id="myBar"></div></div>
          </button>
        </section>
        
      <div>
          ${A.join("")}
        </div>
      </div>
      <dialog id="selectListModal">
      <article>
        <header>
          <h1>Select List</h1>
        </header>
        <form id="selectListForm">
          <select name="select" aria-label="Select" id="select"required>
            <option selected disabled value="">Select List</option>
            ${$}
          </select>
          <button type="submit" class="submitButton">Submit</button>
        </form>
      </article>
      </dialog>
      <dialog id="createModal">
          <article>
            <header>
              <h3>Create new note</h3>
            </header>
            <form id="newNote" action="">
              <label for="noteTitle">Title</label><input type="text" class="form-control form-input" placeholder="Title..." id="noteTitle" name="noteTitle" maxlength="20" title="Max. 20 Chars" required>
              <label for="noteText">Note</label><input type="text" class="form-control" placeholder="Note..." id="noteText" name="noteText" required>
              <label for="noteDeadline">Deadline</label><input type="date" class="form-control" id="noteDeadline" name="noteDeadline" required>
              <button type="submit" id="create" data-tooltip="Create a note">Create</button>
            </form>
          </article>
        </dialog>    
        <dialog id="manageLisModal">
          <article>
            <header>
              <h3>Managae your lists</h3>
            </header>
            <form id="manageListForm" action="">
              <button type="button" id="createList" data-target="createListModal" data-tooltip="Create a list">Create new</button>
              <button type="button" id="deleteList" data-target="deleteListModal" data-tooltip="Delete the current list">Delete current</button>
              <button type="button" id="updateList" data-target="updateListModal" data-tooltip="update the current list">Update current</button>
            </form>
          </article>
        </dialog>
        <dialog id="createListModal">
   <article>
     <header>
       <h3>Create new list</h3>
     </header>
     <form id="newNoteList" action="">
      <label for="createListName">List name</label><input type="text" class="form-control" id="createListName" name="createListName" placeholder="Name...">
       <button type="submit" id="createListButton" data-tooltip="Create a List">Create</button>
    </form>
</article>
 </dialog>
 <dialog id="updateListModal">
   <article>
     <header>
      <h3>Update</h3>
    </header>
     <form id="updateNoteList" action="">
     <label for="updateList">New list name</label><input type="text" class="form-control" id="updateList" name="updateList" placeholder="New Name...">
      <button type="submit" id="create" data-tooltip="Create a List">Create</button>
    </form>
   </article>
 </dialog>  
    `;let t=["#switchList","#manageList","#createList","#updateList"];C!="Select your list"&&t.push("#createNote"),t.forEach(e=>T(document.querySelector(e))),document.querySelectorAll(".updateModalButton").forEach(e=>T(e)),document.querySelectorAll(".cahngeListModalButton").forEach(e=>T(e)),pe(document.querySelector("#newNote"),D,k),$e(document.querySelector("#newNoteList")),Fe(document.querySelector("#updateNoteList")),ye(document.querySelectorAll(".updateNote")),xe(document.querySelectorAll(".updateNoteList")),qe(document.querySelector("#selectListForm")),Te(document.querySelectorAll(".freezeButton")),Ae(document.querySelectorAll(".unfreezeButton")),Ce(document.querySelectorAll(".finishButton")),Pe(document.querySelectorAll(".unfinishButton")),me(document.querySelectorAll(".deleteButton")),je(document.querySelector("#deleteList")),Ve(document.querySelector("#logOut")),C!="Select your list"?Ge(document.querySelector("#myBar"),_,K):document.querySelector("#myProgress").style.display="none"}else document.querySelector("#app").innerHTML=`
    <h1>You are not signed in!</h1>
    <h4>Please sign in to see your notes and lists</h4>
    <div class="topBar">
        <section id="createS">
        <ul id="startList">
          <li id="startItem">
            <button id ="createAccountButton" data-target="createAccountModal" type="button" data-tooltip="Register"><i class="fa-solid fa-plus"></i></button>
          </li>  
          <li id="startItem">
            <button id="loginAccountButton" data-target="loginAccountModal" type="button" data-tooltip="Login to your Account"><i class="fa-solid fa-right-to-bracket"></i></button>   
          </li>   
          </ul>
        </section>
      <div>
    <dialog id="createAccountModal">
      <article>
        <header>
          <h3>Register</h3>
        </header>
        <form id="createAccountForm" action="">
          <label for="createAccountEmail">Email </label><input type="email" class="form-control" id="createAccountEmail" name="createAccountEmail" placeholder="Email..."  required>
          <label for="createAccountName">Username </label><input type="text" class="form-control" id="createAccountName" name="createAccountName" placeholder="Name..." required>
          <label for="createAccountPassword">Password </label><input type="password" class="form-control" id="createAccountPassword" name="createAccountPassword" placeholder="Password..." min-length="8" max-length="72" required>
          <label for="createAccountPasswordRepeat">Repeat Password </label><input type="password" class="form-control" id="createAccountPasswordRepeat" name="createAccountConfirmPassword" placeholder="Repeat Password..." min-length="8" max-length="72" required>
          <button type="submit" id="create" data-tooltip="Register a new Account">Register</button>
        </form>
      </article>
    </dialog>
    <dialog id="loginAccountModal">
      <article>
        <header>
          <h3>Login</h3>
        </header>
        <form id="loginAccountForm" action="">
        <label for="loginAccountEmail">Email </label><input type="email" class="form-control" id="loginAccounEmail" name="loginEmail" placeholder="Your account email" required>
        <label for="loginAccountPassword">Password </label><input type="password" class="form-control" id="loginAccounPassword" name="loginPassword" placeholder="Your password" required>
        <button type="submit" id="create" data-tooltip="Login to your Account">Login</button>
        </form>
      </article>
    </dialog>
  `,["#createAccountButton","#loginAccountButton"].forEach(t=>T(document.querySelector(t))),We(document.querySelector("#createAccountForm")),_e(document.querySelector("#loginAccountForm"));
