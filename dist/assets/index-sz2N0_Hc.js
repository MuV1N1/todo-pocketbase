(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function e(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(s){if(s.ep)return;s.ep=!0;const n=e(s);fetch(s.href,n)}})();class g extends Error{constructor(t){super("ClientResponseError"),this.url="",this.status=0,this.response={},this.isAbort=!1,this.originalError=null,Object.setPrototypeOf(this,g.prototype),t!==null&&typeof t=="object"&&(this.url=typeof t.url=="string"?t.url:"",this.status=typeof t.status=="number"?t.status:0,this.isAbort=!!t.isAbort,this.originalError=t.originalError,t.response!==null&&typeof t.response=="object"?this.response=t.response:t.data!==null&&typeof t.data=="object"?this.response=t.data:this.response={}),this.originalError||t instanceof g||(this.originalError=t),typeof DOMException<"u"&&t instanceof DOMException&&(this.isAbort=!0),this.name="ClientResponseError "+this.status,this.message=this.response?.message,this.message||(this.isAbort?this.message="The request was autocancelled. You can find more info in https://github.com/pocketbase/js-sdk#auto-cancellation.":this.originalError?.cause?.message?.includes("ECONNREFUSED ::1")?this.message="Failed to connect to the PocketBase server. Try changing the SDK URL from localhost to 127.0.0.1 (https://github.com/pocketbase/js-sdk/issues/21).":this.message="Something went wrong while processing your request.")}get data(){return this.response}toJSON(){return{...this}}}const E=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function Q(o,t){const e={};if(typeof o!="string")return e;const i=Object.assign({},t||{}).decode||X;let s=0;for(;s<o.length;){const n=o.indexOf("=",s);if(n===-1)break;let r=o.indexOf(";",s);if(r===-1)r=o.length;else if(r<n){s=o.lastIndexOf(";",n-1)+1;continue}const a=o.slice(s,n).trim();if(e[a]===void 0){let l=o.slice(n+1,r).trim();l.charCodeAt(0)===34&&(l=l.slice(1,-1));try{e[a]=i(l)}catch{e[a]=l}}s=r+1}return e}function j(o,t,e){const i=Object.assign({},e||{}),s=i.encode||ee;if(!E.test(o))throw new TypeError("argument name is invalid");const n=s(t);if(n&&!E.test(n))throw new TypeError("argument val is invalid");let r=o+"="+n;if(i.maxAge!=null){const a=i.maxAge-0;if(isNaN(a)||!isFinite(a))throw new TypeError("option maxAge is invalid");r+="; Max-Age="+Math.floor(a)}if(i.domain){if(!E.test(i.domain))throw new TypeError("option domain is invalid");r+="; Domain="+i.domain}if(i.path){if(!E.test(i.path))throw new TypeError("option path is invalid");r+="; Path="+i.path}if(i.expires){if(!function(l){return Object.prototype.toString.call(l)==="[object Date]"||l instanceof Date}(i.expires)||isNaN(i.expires.valueOf()))throw new TypeError("option expires is invalid");r+="; Expires="+i.expires.toUTCString()}if(i.httpOnly&&(r+="; HttpOnly"),i.secure&&(r+="; Secure"),i.priority)switch(typeof i.priority=="string"?i.priority.toLowerCase():i.priority){case"low":r+="; Priority=Low";break;case"medium":r+="; Priority=Medium";break;case"high":r+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}if(i.sameSite)switch(typeof i.sameSite=="string"?i.sameSite.toLowerCase():i.sameSite){case!0:r+="; SameSite=Strict";break;case"lax":r+="; SameSite=Lax";break;case"strict":r+="; SameSite=Strict";break;case"none":r+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return r}function X(o){return o.indexOf("%")!==-1?decodeURIComponent(o):o}function ee(o){return encodeURIComponent(o)}let _;function v(o){if(o)try{const t=decodeURIComponent(_(o.split(".")[1]).split("").map(function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(t)||{}}catch{}return{}}function H(o,t=0){let e=v(o);return!(Object.keys(e).length>0&&(!e.exp||e.exp-t>Date.now()/1e3))}_=typeof atob=="function"?atob:o=>{let t=String(o).replace(/=+$/,"");if(t.length%4==1)throw new Error("'atob' failed: The string to be decoded is not correctly encoded.");for(var e,i,s=0,n=0,r="";i=t.charAt(n++);~i&&(e=s%4?64*e+i:i,s++%4)?r+=String.fromCharCode(255&e>>(-2*s&6)):0)i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(i);return r};const B="pb_auth";class te{constructor(){this.baseToken="",this.baseModel=null,this._onChangeCallbacks=[]}get token(){return this.baseToken}get model(){return this.baseModel}get isValid(){return!H(this.token)}get isAdmin(){return v(this.token).type==="admin"}get isAuthRecord(){return v(this.token).type==="authRecord"}save(t,e){this.baseToken=t||"",this.baseModel=e||null,this.triggerChange()}clear(){this.baseToken="",this.baseModel=null,this.triggerChange()}loadFromCookie(t,e=B){const i=Q(t||"")[e]||"";let s={};try{s=JSON.parse(i),(typeof s===null||typeof s!="object"||Array.isArray(s))&&(s={})}catch{}this.save(s.token||"",s.model||null)}exportToCookie(t,e=B){const i={secure:!0,sameSite:!0,httpOnly:!0,path:"/"},s=v(this.token);i.expires=s?.exp?new Date(1e3*s.exp):new Date("1970-01-01"),t=Object.assign({},i,t);const n={token:this.token,model:this.model?JSON.parse(JSON.stringify(this.model)):null};let r=j(e,JSON.stringify(n),t);const a=typeof Blob<"u"?new Blob([r]).size:r.length;if(n.model&&a>4096){n.model={id:n?.model?.id,email:n?.model?.email};const l=["collectionId","username","verified"];for(const d in this.model)l.includes(d)&&(n.model[d]=this.model[d]);r=j(e,JSON.stringify(n),t)}return r}onChange(t,e=!1){return this._onChangeCallbacks.push(t),e&&t(this.token,this.model),()=>{for(let i=this._onChangeCallbacks.length-1;i>=0;i--)if(this._onChangeCallbacks[i]==t)return delete this._onChangeCallbacks[i],void this._onChangeCallbacks.splice(i,1)}}triggerChange(){for(const t of this._onChangeCallbacks)t&&t(this.token,this.model)}}class ie extends te{constructor(t="pocketbase_auth"){super(),this.storageFallback={},this.storageKey=t,this._bindStorageEvent()}get token(){return(this._storageGet(this.storageKey)||{}).token||""}get model(){return(this._storageGet(this.storageKey)||{}).model||null}save(t,e){this._storageSet(this.storageKey,{token:t,model:e}),super.save(t,e)}clear(){this._storageRemove(this.storageKey),super.clear()}_storageGet(t){if(typeof window<"u"&&window?.localStorage){const e=window.localStorage.getItem(t)||"";try{return JSON.parse(e)}catch{return e}}return this.storageFallback[t]}_storageSet(t,e){if(typeof window<"u"&&window?.localStorage){let i=e;typeof e!="string"&&(i=JSON.stringify(e)),window.localStorage.setItem(t,i)}else this.storageFallback[t]=e}_storageRemove(t){typeof window<"u"&&window?.localStorage&&window.localStorage?.removeItem(t),delete this.storageFallback[t]}_bindStorageEvent(){typeof window<"u"&&window?.localStorage&&window.addEventListener&&window.addEventListener("storage",t=>{if(t.key!=this.storageKey)return;const e=this._storageGet(this.storageKey)||{};super.save(e.token||"",e.model||null)})}}class C{constructor(t){this.client=t}}class se extends C{async getAll(t){return t=Object.assign({method:"GET"},t),this.client.send("/api/settings",t)}async update(t,e){return e=Object.assign({method:"PATCH",body:t},e),this.client.send("/api/settings",e)}async testS3(t="storage",e){return e=Object.assign({method:"POST",body:{filesystem:t}},e),this.client.send("/api/settings/test/s3",e).then(()=>!0)}async testEmail(t,e,i){return i=Object.assign({method:"POST",body:{email:t,template:e}},i),this.client.send("/api/settings/test/email",i).then(()=>!0)}async generateAppleClientSecret(t,e,i,s,n,r){return r=Object.assign({method:"POST",body:{clientId:t,teamId:e,keyId:i,privateKey:s,duration:n}},r),this.client.send("/api/settings/apple/generate-client-secret",r)}}class U extends C{decode(t){return t}async getFullList(t,e){if(typeof t=="number")return this._getFullList(t,e);let i=500;return(e=Object.assign({},t,e)).batch&&(i=e.batch,delete e.batch),this._getFullList(i,e)}async getList(t=1,e=30,i){return(i=Object.assign({method:"GET"},i)).query=Object.assign({page:t,perPage:e},i.query),this.client.send(this.baseCrudPath,i).then(s=>(s.items=s.items?.map(n=>this.decode(n))||[],s))}async getFirstListItem(t,e){return(e=Object.assign({requestKey:"one_by_filter_"+this.baseCrudPath+"_"+t},e)).query=Object.assign({filter:t,skipTotal:1},e.query),this.getList(1,1,e).then(i=>{if(!i?.items?.length)throw new g({status:404,response:{code:404,message:"The requested resource wasn't found.",data:{}}});return i.items[0]})}async getOne(t,e){if(!t)throw new g({url:this.client.buildUrl(this.baseCrudPath+"/"),status:404,response:{code:404,message:"Missing required record id.",data:{}}});return e=Object.assign({method:"GET"},e),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(t),e).then(i=>this.decode(i))}async create(t,e){return e=Object.assign({method:"POST",body:t},e),this.client.send(this.baseCrudPath,e).then(i=>this.decode(i))}async update(t,e,i){return i=Object.assign({method:"PATCH",body:e},i),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(t),i).then(s=>this.decode(s))}async delete(t,e){return e=Object.assign({method:"DELETE"},e),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(t),e).then(()=>!0)}_getFullList(t=500,e){(e=e||{}).query=Object.assign({skipTotal:1},e.query);let i=[],s=async n=>this.getList(n,t||500,e).then(r=>{const a=r.items;return i=i.concat(a),a.length==r.perPage?s(n+1):i});return s(1)}}function m(o,t,e,i){const s=i!==void 0;return s||e!==void 0?s?(console.warn(o),t.body=Object.assign({},t.body,e),t.query=Object.assign({},t.query,i),t):Object.assign(t,e):t}function q(o){o._resetAutoRefresh?.()}class ne extends U{get baseCrudPath(){return"/api/admins"}async update(t,e,i){return super.update(t,e,i).then(s=>(this.client.authStore.model?.id===s.id&&this.client.authStore.model?.collectionId===void 0&&this.client.authStore.save(this.client.authStore.token,s),s))}async delete(t,e){return super.delete(t,e).then(i=>(i&&this.client.authStore.model?.id===t&&this.client.authStore.model?.collectionId===void 0&&this.client.authStore.clear(),i))}authResponse(t){const e=this.decode(t?.admin||{});return t?.token&&t?.admin&&this.client.authStore.save(t.token,e),Object.assign({},t,{token:t?.token||"",admin:e})}async authWithPassword(t,e,i,s){let n={method:"POST",body:{identity:t,password:e}};n=m("This form of authWithPassword(email, pass, body?, query?) is deprecated. Consider replacing it with authWithPassword(email, pass, options?).",n,i,s);const r=n.autoRefreshThreshold;delete n.autoRefreshThreshold,n.autoRefresh||q(this.client);let a=await this.client.send(this.baseCrudPath+"/auth-with-password",n);return a=this.authResponse(a),r&&function(d,h,y,u){q(d);const c=d.beforeSend,p=d.authStore.model,w=d.authStore.onChange((S,b)=>{(!S||b?.id!=p?.id||(b?.collectionId||p?.collectionId)&&b?.collectionId!=p?.collectionId)&&q(d)});d._resetAutoRefresh=function(){w(),d.beforeSend=c,delete d._resetAutoRefresh},d.beforeSend=async(S,b)=>{const Y=d.authStore.token;if(b.query?.autoRefresh)return c?c(S,b):{url:S,sendOptions:b};let I=d.authStore.isValid;if(I&&H(d.authStore.token,h))try{await y()}catch{I=!1}I||await u();const k=b.headers||{};for(let O in k)if(O.toLowerCase()=="authorization"&&Y==k[O]&&d.authStore.token){k[O]=d.authStore.token;break}return b.headers=k,c?c(S,b):{url:S,sendOptions:b}}}(this.client,r,()=>this.authRefresh({autoRefresh:!0}),()=>this.authWithPassword(t,e,Object.assign({autoRefresh:!0},n))),a}async authRefresh(t,e){let i={method:"POST"};return i=m("This form of authRefresh(body?, query?) is deprecated. Consider replacing it with authRefresh(options?).",i,t,e),this.client.send(this.baseCrudPath+"/auth-refresh",i).then(this.authResponse.bind(this))}async requestPasswordReset(t,e,i){let s={method:"POST",body:{email:t}};return s=m("This form of requestPasswordReset(email, body?, query?) is deprecated. Consider replacing it with requestPasswordReset(email, options?).",s,e,i),this.client.send(this.baseCrudPath+"/request-password-reset",s).then(()=>!0)}async confirmPasswordReset(t,e,i,s,n){let r={method:"POST",body:{token:t,password:e,passwordConfirm:i}};return r=m("This form of confirmPasswordReset(resetToken, password, passwordConfirm, body?, query?) is deprecated. Consider replacing it with confirmPasswordReset(resetToken, password, passwordConfirm, options?).",r,s,n),this.client.send(this.baseCrudPath+"/confirm-password-reset",r).then(()=>!0)}}const oe=["requestKey","$cancelKey","$autoCancel","fetch","headers","body","query","params","cache","credentials","headers","integrity","keepalive","method","mode","redirect","referrer","referrerPolicy","signal","window"];function V(o){if(o){o.query=o.query||{};for(let t in o)oe.includes(t)||(o.query[t]=o[t],delete o[t])}}class G extends C{constructor(){super(...arguments),this.clientId="",this.eventSource=null,this.subscriptions={},this.lastSentSubscriptions=[],this.maxConnectTimeout=15e3,this.reconnectAttempts=0,this.maxReconnectAttempts=1/0,this.predefinedReconnectIntervals=[200,300,500,1e3,1200,1500,2e3],this.pendingConnects=[]}get isConnected(){return!!this.eventSource&&!!this.clientId&&!this.pendingConnects.length}async subscribe(t,e,i){if(!t)throw new Error("topic must be set.");let s=t;if(i){V(i);const r="options="+encodeURIComponent(JSON.stringify({query:i.query,headers:i.headers}));s+=(s.includes("?")?"&":"?")+r}const n=function(r){const a=r;let l;try{l=JSON.parse(a?.data)}catch{}e(l||{})};return this.subscriptions[s]||(this.subscriptions[s]=[]),this.subscriptions[s].push(n),this.isConnected?this.subscriptions[s].length===1?await this.submitSubscriptions():this.eventSource?.addEventListener(s,n):await this.connect(),async()=>this.unsubscribeByTopicAndListener(t,n)}async unsubscribe(t){let e=!1;if(t){const i=this.getSubscriptionsByTopic(t);for(let s in i)if(this.hasSubscriptionListeners(s)){for(let n of this.subscriptions[s])this.eventSource?.removeEventListener(s,n);delete this.subscriptions[s],e||(e=!0)}}else this.subscriptions={};this.hasSubscriptionListeners()?e&&await this.submitSubscriptions():this.disconnect()}async unsubscribeByPrefix(t){let e=!1;for(let i in this.subscriptions)if((i+"?").startsWith(t)){e=!0;for(let s of this.subscriptions[i])this.eventSource?.removeEventListener(i,s);delete this.subscriptions[i]}e&&(this.hasSubscriptionListeners()?await this.submitSubscriptions():this.disconnect())}async unsubscribeByTopicAndListener(t,e){let i=!1;const s=this.getSubscriptionsByTopic(t);for(let n in s){if(!Array.isArray(this.subscriptions[n])||!this.subscriptions[n].length)continue;let r=!1;for(let a=this.subscriptions[n].length-1;a>=0;a--)this.subscriptions[n][a]===e&&(r=!0,delete this.subscriptions[n][a],this.subscriptions[n].splice(a,1),this.eventSource?.removeEventListener(n,e));r&&(this.subscriptions[n].length||delete this.subscriptions[n],i||this.hasSubscriptionListeners(n)||(i=!0))}this.hasSubscriptionListeners()?i&&await this.submitSubscriptions():this.disconnect()}hasSubscriptionListeners(t){if(this.subscriptions=this.subscriptions||{},t)return!!this.subscriptions[t]?.length;for(let e in this.subscriptions)if(this.subscriptions[e]?.length)return!0;return!1}async submitSubscriptions(){if(this.clientId)return this.addAllSubscriptionListeners(),this.lastSentSubscriptions=this.getNonEmptySubscriptionKeys(),this.client.send("/api/realtime",{method:"POST",body:{clientId:this.clientId,subscriptions:this.lastSentSubscriptions},requestKey:this.getSubscriptionsCancelKey()}).catch(t=>{if(!t?.isAbort)throw t})}getSubscriptionsCancelKey(){return"realtime_"+this.clientId}getSubscriptionsByTopic(t){const e={};t=t.includes("?")?t:t+"?";for(let i in this.subscriptions)(i+"?").startsWith(t)&&(e[i]=this.subscriptions[i]);return e}getNonEmptySubscriptionKeys(){const t=[];for(let e in this.subscriptions)this.subscriptions[e].length&&t.push(e);return t}addAllSubscriptionListeners(){if(this.eventSource){this.removeAllSubscriptionListeners();for(let t in this.subscriptions)for(let e of this.subscriptions[t])this.eventSource.addEventListener(t,e)}}removeAllSubscriptionListeners(){if(this.eventSource)for(let t in this.subscriptions)for(let e of this.subscriptions[t])this.eventSource.removeEventListener(t,e)}async connect(){if(!(this.reconnectAttempts>0))return new Promise((t,e)=>{this.pendingConnects.push({resolve:t,reject:e}),this.pendingConnects.length>1||this.initConnect()})}initConnect(){this.disconnect(!0),clearTimeout(this.connectTimeoutId),this.connectTimeoutId=setTimeout(()=>{this.connectErrorHandler(new Error("EventSource connect took too long."))},this.maxConnectTimeout),this.eventSource=new EventSource(this.client.buildUrl("/api/realtime")),this.eventSource.onerror=t=>{this.connectErrorHandler(new Error("Failed to establish realtime connection."))},this.eventSource.addEventListener("PB_CONNECT",t=>{const e=t;this.clientId=e?.lastEventId,this.submitSubscriptions().then(async()=>{let i=3;for(;this.hasUnsentSubscriptions()&&i>0;)i--,await this.submitSubscriptions()}).then(()=>{for(let s of this.pendingConnects)s.resolve();this.pendingConnects=[],this.reconnectAttempts=0,clearTimeout(this.reconnectTimeoutId),clearTimeout(this.connectTimeoutId);const i=this.getSubscriptionsByTopic("PB_CONNECT");for(let s in i)for(let n of i[s])n(t)}).catch(i=>{this.clientId="",this.connectErrorHandler(i)})})}hasUnsentSubscriptions(){const t=this.getNonEmptySubscriptionKeys();if(t.length!=this.lastSentSubscriptions.length)return!0;for(const e of t)if(!this.lastSentSubscriptions.includes(e))return!0;return!1}connectErrorHandler(t){if(clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),!this.clientId&&!this.reconnectAttempts||this.reconnectAttempts>this.maxReconnectAttempts){for(let i of this.pendingConnects)i.reject(new g(t));return this.pendingConnects=[],void this.disconnect()}this.disconnect(!0);const e=this.predefinedReconnectIntervals[this.reconnectAttempts]||this.predefinedReconnectIntervals[this.predefinedReconnectIntervals.length-1];this.reconnectAttempts++,this.reconnectTimeoutId=setTimeout(()=>{this.initConnect()},e)}disconnect(t=!1){if(clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),this.removeAllSubscriptionListeners(),this.client.cancelRequest(this.getSubscriptionsCancelKey()),this.eventSource?.close(),this.eventSource=null,this.clientId="",!t){this.reconnectAttempts=0;for(let e of this.pendingConnects)e.resolve();this.pendingConnects=[]}}}class re extends U{constructor(t,e){super(t),this.collectionIdOrName=e}get baseCrudPath(){return this.baseCollectionPath+"/records"}get baseCollectionPath(){return"/api/collections/"+encodeURIComponent(this.collectionIdOrName)}async subscribe(t,e,i){if(!t)throw new Error("Missing topic.");if(!e)throw new Error("Missing subscription callback.");return this.client.realtime.subscribe(this.collectionIdOrName+"/"+t,e,i)}async unsubscribe(t){return t?this.client.realtime.unsubscribe(this.collectionIdOrName+"/"+t):this.client.realtime.unsubscribeByPrefix(this.collectionIdOrName)}async getFullList(t,e){if(typeof t=="number")return super.getFullList(t,e);const i=Object.assign({},t,e);return super.getFullList(i)}async getList(t=1,e=30,i){return super.getList(t,e,i)}async getFirstListItem(t,e){return super.getFirstListItem(t,e)}async getOne(t,e){return super.getOne(t,e)}async create(t,e){return super.create(t,e)}async update(t,e,i){return super.update(t,e,i).then(s=>(this.client.authStore.model?.id!==s?.id||this.client.authStore.model?.collectionId!==this.collectionIdOrName&&this.client.authStore.model?.collectionName!==this.collectionIdOrName||this.client.authStore.save(this.client.authStore.token,s),s))}async delete(t,e){return super.delete(t,e).then(i=>(!i||this.client.authStore.model?.id!==t||this.client.authStore.model?.collectionId!==this.collectionIdOrName&&this.client.authStore.model?.collectionName!==this.collectionIdOrName||this.client.authStore.clear(),i))}authResponse(t){const e=this.decode(t?.record||{});return this.client.authStore.save(t?.token,e),Object.assign({},t,{token:t?.token||"",record:e})}async listAuthMethods(t){return t=Object.assign({method:"GET"},t),this.client.send(this.baseCollectionPath+"/auth-methods",t).then(e=>Object.assign({},e,{usernamePassword:!!e?.usernamePassword,emailPassword:!!e?.emailPassword,authProviders:Array.isArray(e?.authProviders)?e?.authProviders:[]}))}async authWithPassword(t,e,i,s){let n={method:"POST",body:{identity:t,password:e}};return n=m("This form of authWithPassword(usernameOrEmail, pass, body?, query?) is deprecated. Consider replacing it with authWithPassword(usernameOrEmail, pass, options?).",n,i,s),this.client.send(this.baseCollectionPath+"/auth-with-password",n).then(r=>this.authResponse(r))}async authWithOAuth2Code(t,e,i,s,n,r,a){let l={method:"POST",body:{provider:t,code:e,codeVerifier:i,redirectUrl:s,createData:n}};return l=m("This form of authWithOAuth2Code(provider, code, codeVerifier, redirectUrl, createData?, body?, query?) is deprecated. Consider replacing it with authWithOAuth2Code(provider, code, codeVerifier, redirectUrl, createData?, options?).",l,r,a),this.client.send(this.baseCollectionPath+"/auth-with-oauth2",l).then(d=>this.authResponse(d))}async authWithOAuth2(...t){if(t.length>1||typeof t?.[0]=="string")return console.warn("PocketBase: This form of authWithOAuth2() is deprecated and may get removed in the future. Please replace with authWithOAuth2Code() OR use the authWithOAuth2() realtime form as shown in https://pocketbase.io/docs/authentication/#oauth2-integration."),this.authWithOAuth2Code(t?.[0]||"",t?.[1]||"",t?.[2]||"",t?.[3]||"",t?.[4]||{},t?.[5]||{},t?.[6]||{});const e=t?.[0]||{},i=(await this.listAuthMethods()).authProviders.find(l=>l.name===e.provider);if(!i)throw new g(new Error(`Missing or invalid provider "${e.provider}".`));const s=this.client.buildUrl("/api/oauth2-redirect"),n=new G(this.client);let r=null;function a(){r?.close(),n.unsubscribe()}return e.urlCallback||(r=F(void 0)),new Promise(async(l,d)=>{try{await n.subscribe("@oauth2",async c=>{const p=n.clientId;try{if(!c.state||p!==c.state)throw new Error("State parameters don't match.");if(c.error||!c.code)throw new Error("OAuth2 redirect error or missing code: "+c.error);const w=Object.assign({},e);delete w.provider,delete w.scopes,delete w.createData,delete w.urlCallback;const S=await this.authWithOAuth2Code(i.name,c.code,i.codeVerifier,s,e.createData,w);l(S)}catch(w){d(new g(w))}a()});const h={state:n.clientId};e.scopes?.length&&(h.scope=e.scopes.join(" "));const y=this._replaceQueryParams(i.authUrl+s,h);await(e.urlCallback||function(c){r?r.location.href=c:r=F(c)})(y)}catch(h){a(),d(new g(h))}})}async authRefresh(t,e){let i={method:"POST"};return i=m("This form of authRefresh(body?, query?) is deprecated. Consider replacing it with authRefresh(options?).",i,t,e),this.client.send(this.baseCollectionPath+"/auth-refresh",i).then(s=>this.authResponse(s))}async requestPasswordReset(t,e,i){let s={method:"POST",body:{email:t}};return s=m("This form of requestPasswordReset(email, body?, query?) is deprecated. Consider replacing it with requestPasswordReset(email, options?).",s,e,i),this.client.send(this.baseCollectionPath+"/request-password-reset",s).then(()=>!0)}async confirmPasswordReset(t,e,i,s,n){let r={method:"POST",body:{token:t,password:e,passwordConfirm:i}};return r=m("This form of confirmPasswordReset(token, password, passwordConfirm, body?, query?) is deprecated. Consider replacing it with confirmPasswordReset(token, password, passwordConfirm, options?).",r,s,n),this.client.send(this.baseCollectionPath+"/confirm-password-reset",r).then(()=>!0)}async requestVerification(t,e,i){let s={method:"POST",body:{email:t}};return s=m("This form of requestVerification(email, body?, query?) is deprecated. Consider replacing it with requestVerification(email, options?).",s,e,i),this.client.send(this.baseCollectionPath+"/request-verification",s).then(()=>!0)}async confirmVerification(t,e,i){let s={method:"POST",body:{token:t}};return s=m("This form of confirmVerification(token, body?, query?) is deprecated. Consider replacing it with confirmVerification(token, options?).",s,e,i),this.client.send(this.baseCollectionPath+"/confirm-verification",s).then(()=>{const n=v(t),r=this.client.authStore.model;return r&&!r.verified&&r.id===n.id&&r.collectionId===n.collectionId&&(r.verified=!0,this.client.authStore.save(this.client.authStore.token,r)),!0})}async requestEmailChange(t,e,i){let s={method:"POST",body:{newEmail:t}};return s=m("This form of requestEmailChange(newEmail, body?, query?) is deprecated. Consider replacing it with requestEmailChange(newEmail, options?).",s,e,i),this.client.send(this.baseCollectionPath+"/request-email-change",s).then(()=>!0)}async confirmEmailChange(t,e,i,s){let n={method:"POST",body:{token:t,password:e}};return n=m("This form of confirmEmailChange(token, password, body?, query?) is deprecated. Consider replacing it with confirmEmailChange(token, password, options?).",n,i,s),this.client.send(this.baseCollectionPath+"/confirm-email-change",n).then(()=>{const r=v(t),a=this.client.authStore.model;return a&&a.id===r.id&&a.collectionId===r.collectionId&&this.client.authStore.clear(),!0})}async listExternalAuths(t,e){return e=Object.assign({method:"GET"},e),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(t)+"/external-auths",e)}async unlinkExternalAuth(t,e,i){return i=Object.assign({method:"DELETE"},i),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(t)+"/external-auths/"+encodeURIComponent(e),i).then(()=>!0)}_replaceQueryParams(t,e={}){let i=t,s="";t.indexOf("?")>=0&&(i=t.substring(0,t.indexOf("?")),s=t.substring(t.indexOf("?")+1));const n={},r=s.split("&");for(const a of r){if(a=="")continue;const l=a.split("=");n[decodeURIComponent(l[0].replace(/\+/g," "))]=decodeURIComponent((l[1]||"").replace(/\+/g," "))}for(let a in e)e.hasOwnProperty(a)&&(e[a]==null?delete n[a]:n[a]=e[a]);s="";for(let a in n)n.hasOwnProperty(a)&&(s!=""&&(s+="&"),s+=encodeURIComponent(a.replace(/%20/g,"+"))+"="+encodeURIComponent(n[a].replace(/%20/g,"+")));return s!=""?i+"?"+s:i}}function F(o){if(typeof window>"u"||!window?.open)throw new g(new Error("Not in a browser context - please pass a custom urlCallback function."));let t=1024,e=768,i=window.innerWidth,s=window.innerHeight;t=t>i?i:t,e=e>s?s:e;let n=i/2-t/2,r=s/2-e/2;return window.open(o,"popup_window","width="+t+",height="+e+",top="+r+",left="+n+",resizable,menubar=no")}class ae extends U{get baseCrudPath(){return"/api/collections"}async import(t,e=!1,i){return i=Object.assign({method:"PUT",body:{collections:t,deleteMissing:e}},i),this.client.send(this.baseCrudPath+"/import",i).then(()=>!0)}}class ce extends C{async getList(t=1,e=30,i){return(i=Object.assign({method:"GET"},i)).query=Object.assign({page:t,perPage:e},i.query),this.client.send("/api/logs",i)}async getOne(t,e){if(!t)throw new g({url:this.client.buildUrl("/api/logs/"),status:404,response:{code:404,message:"Missing required log id.",data:{}}});return e=Object.assign({method:"GET"},e),this.client.send("/api/logs/"+encodeURIComponent(t),e)}async getStats(t){return t=Object.assign({method:"GET"},t),this.client.send("/api/logs/stats",t)}}class le extends C{async check(t){return t=Object.assign({method:"GET"},t),this.client.send("/api/health",t)}}class de extends C{getUrl(t,e,i={}){if(!e||!t?.id||!t?.collectionId&&!t?.collectionName)return"";const s=[];s.push("api"),s.push("files"),s.push(encodeURIComponent(t.collectionId||t.collectionName)),s.push(encodeURIComponent(t.id)),s.push(encodeURIComponent(e));let n=this.client.buildUrl(s.join("/"));if(Object.keys(i).length){i.download===!1&&delete i.download;const r=new URLSearchParams(i);n+=(n.includes("?")?"&":"?")+r}return n}async getToken(t){return t=Object.assign({method:"POST"},t),this.client.send("/api/files/token",t).then(e=>e?.token||"")}}class ue extends C{async getFullList(t){return t=Object.assign({method:"GET"},t),this.client.send("/api/backups",t)}async create(t,e){return e=Object.assign({method:"POST",body:{name:t}},e),this.client.send("/api/backups",e).then(()=>!0)}async upload(t,e){return e=Object.assign({method:"POST",body:t},e),this.client.send("/api/backups/upload",e).then(()=>!0)}async delete(t,e){return e=Object.assign({method:"DELETE"},e),this.client.send(`/api/backups/${encodeURIComponent(t)}`,e).then(()=>!0)}async restore(t,e){return e=Object.assign({method:"POST"},e),this.client.send(`/api/backups/${encodeURIComponent(t)}/restore`,e).then(()=>!0)}getDownloadUrl(t,e){return this.client.buildUrl(`/api/backups/${encodeURIComponent(e)}?token=${encodeURIComponent(t)}`)}}class f{constructor(t="/",e,i="en-US"){this.cancelControllers={},this.recordServices={},this.enableAutoCancellation=!0,this.baseUrl=t,this.lang=i,this.authStore=e||new ie,this.admins=new ne(this),this.collections=new ae(this),this.files=new de(this),this.logs=new ce(this),this.settings=new se(this),this.realtime=new G(this),this.health=new le(this),this.backups=new ue(this)}collection(t){return this.recordServices[t]||(this.recordServices[t]=new re(this,t)),this.recordServices[t]}autoCancellation(t){return this.enableAutoCancellation=!!t,this}cancelRequest(t){return this.cancelControllers[t]&&(this.cancelControllers[t].abort(),delete this.cancelControllers[t]),this}cancelAllRequests(){for(let t in this.cancelControllers)this.cancelControllers[t].abort();return this.cancelControllers={},this}filter(t,e){if(!e)return t;for(let i in e){let s=e[i];switch(typeof s){case"boolean":case"number":s=""+s;break;case"string":s="'"+s.replace(/'/g,"\\'")+"'";break;default:s=s===null?"null":s instanceof Date?"'"+s.toISOString().replace("T"," ")+"'":"'"+JSON.stringify(s).replace(/'/g,"\\'")+"'"}t=t.replaceAll("{:"+i+"}",s)}return t}getFileUrl(t,e,i={}){return this.files.getUrl(t,e,i)}buildUrl(t){let e=this.baseUrl;return typeof window>"u"||!window.location||e.startsWith("https://")||e.startsWith("http://")||(e=window.location.origin?.endsWith("/")?window.location.origin.substring(0,window.location.origin.length-1):window.location.origin||"",this.baseUrl.startsWith("/")||(e+=window.location.pathname||"/",e+=e.endsWith("/")?"":"/"),e+=this.baseUrl),t&&(e+=e.endsWith("/")?"":"/",e+=t.startsWith("/")?t.substring(1):t),e}async send(t,e){e=this.initSendOptions(t,e);let i=this.buildUrl(t);if(this.beforeSend){const s=Object.assign({},await this.beforeSend(i,e));s.url!==void 0||s.options!==void 0?(i=s.url||i,e=s.options||e):Object.keys(s).length&&(e=s,console?.warn&&console.warn("Deprecated format of beforeSend return: please use `return { url, options }`, instead of `return options`."))}if(e.query!==void 0){const s=this.serializeQueryParams(e.query);s&&(i+=(i.includes("?")?"&":"?")+s),delete e.query}return this.getHeader(e.headers,"Content-Type")=="application/json"&&e.body&&typeof e.body!="string"&&(e.body=JSON.stringify(e.body)),(e.fetch||fetch)(i,e).then(async s=>{let n={};try{n=await s.json()}catch{}if(this.afterSend&&(n=await this.afterSend(s,n)),s.status>=400)throw new g({url:s.url,status:s.status,data:n});return n}).catch(s=>{throw new g(s)})}initSendOptions(t,e){if((e=Object.assign({method:"GET"},e)).body=this.convertToFormDataIfNeeded(e.body),V(e),e.query=Object.assign({},e.params,e.query),e.requestKey===void 0&&(e.$autoCancel===!1||e.query.$autoCancel===!1?e.requestKey=null:(e.$cancelKey||e.query.$cancelKey)&&(e.requestKey=e.$cancelKey||e.query.$cancelKey)),delete e.$autoCancel,delete e.query.$autoCancel,delete e.$cancelKey,delete e.query.$cancelKey,this.getHeader(e.headers,"Content-Type")!==null||this.isFormData(e.body)||(e.headers=Object.assign({},e.headers,{"Content-Type":"application/json"})),this.getHeader(e.headers,"Accept-Language")===null&&(e.headers=Object.assign({},e.headers,{"Accept-Language":this.lang})),this.authStore.token&&this.getHeader(e.headers,"Authorization")===null&&(e.headers=Object.assign({},e.headers,{Authorization:this.authStore.token})),this.enableAutoCancellation&&e.requestKey!==null){const i=e.requestKey||(e.method||"GET")+t;delete e.requestKey,this.cancelRequest(i);const s=new AbortController;this.cancelControllers[i]=s,e.signal=s.signal}return e}convertToFormDataIfNeeded(t){if(typeof FormData>"u"||t===void 0||typeof t!="object"||t===null||this.isFormData(t)||!this.hasBlobField(t))return t;const e=new FormData;for(const i in t){const s=t[i];if(typeof s!="object"||this.hasBlobField({data:s})){const n=Array.isArray(s)?s:[s];for(let r of n)e.append(i,r)}else{let n={};n[i]=s,e.append("@jsonPayload",JSON.stringify(n))}}return e}hasBlobField(t){for(const e in t){const i=Array.isArray(t[e])?t[e]:[t[e]];for(const s of i)if(typeof Blob<"u"&&s instanceof Blob||typeof File<"u"&&s instanceof File)return!0}return!1}getHeader(t,e){t=t||{},e=e.toLowerCase();for(let i in t)if(i.toLowerCase()==e)return t[i];return null}isFormData(t){return t&&(t.constructor.name==="FormData"||typeof FormData<"u"&&t instanceof FormData)}serializeQueryParams(t){const e=[];for(const i in t){if(t[i]===null)continue;const s=t[i],n=encodeURIComponent(i);if(Array.isArray(s))for(const r of s)e.push(n+"="+encodeURIComponent(r));else s instanceof Date?e.push(n+"="+encodeURIComponent(s.toISOString())):typeof s!==null&&typeof s=="object"?e.push(n+"="+encodeURIComponent(JSON.stringify(s))):e.push(n+"="+encodeURIComponent(s))}return e.join("&")}}function he(o,t){o.addEventListener("submit",e=>{e.preventDefault();const i=new FormData(e.target),s=i.get("noteTitle"),n=i.get("noteText"),r=i.get("noteDeadline");pe(s,n,r,t)})}async function pe(o,t,e,i){const s=new f("http://127.0.0.1:8090");if(i!==null){const n={title:o,text:t,deadline:e,finished:!1,freeze:!1,sortBottom:!1,list:i};await s.collection("notes").create(n),location.reload(!1)}}function P(o,t){const e="modal-is-open",i="modal-is-opening",s="modal-is-closing",n="--pico-scrollbar-width";let a=null;o.addEventListener("click",u=>{u.preventDefault();const c=document.getElementById(u.currentTarget.dataset.target);c&&c&&(l(c)?h(c):d(c))});const l=u=>u.hasAttribute("open")&&u.getAttribute("open")!=="false",d=u=>{const{documentElement:c}=document,p=y();p&&c.style.setProperty(n,`${p}px`),c.classList.add(e,i),setTimeout(()=>{a=u,c.classList.remove(i)},0),u.setAttribute("open",!0)},h=u=>{a=null;const{documentElement:c}=document;c.classList.add(s),setTimeout(()=>{c.classList.remove(s,e),c.style.removeProperty(n),u.removeAttribute("open")},0)};document.addEventListener("click",u=>{if(a===null)return;!a.querySelector("article").contains(u.target)&&h(a)}),document.addEventListener("keydown",u=>{u.key==="Escape"&&a&&h(a)});const y=()=>window.innerWidth-document.documentElement.clientWidth}function fe(o){o!==null&&o.forEach(t=>{t.addEventListener("click",e=>{if(confirm(`Are you sure?          
When you DELETE this note you have NO chance to get it back!          
Be realy sure if you want to delete it!`))e.preventDefault(),me(t.id);else return})})}async function me(o){await new f("http://127.0.0.1:8090").collection("notes").delete(o),location.reload(!1)}const ge=new f("http://127.0.0.1:8090");async function be(o){o.forEach(t=>{ye(t)})}function ye(o){o.addEventListener("submit",async t=>{t.preventDefault();const e=new FormData(t.target),i=o.id,s=e.get("newNoteTitle"),n=e.get("newNoteText"),r=e.get("newNoteDeadline"),a={title:s,text:n,deadline:r,finished:!1,freeze:!1,sortBottom:!1};await ge.collection("notes").update(i,a),location.reload(!1)})}const we=new f("http://127.0.0.1:8090");async function Se(o){o.forEach(t=>{Ce(t)})}function Ce(o){o.addEventListener("click",async t=>{t.preventDefault();const e=o.id,s={finished:!0,finishedDate:new Date,freeze:!1,sortBottom:!0};await we.collection("notes").update(e,s),location.reload(!1)})}const Le=new f("http://127.0.0.1:8090");async function ve(o){o.forEach(t=>{ke(t)})}function ke(o){o.addEventListener("click",async t=>{t.preventDefault();const e=o.id,i={finished:!1,finishedDate:NaN,finished:!1,sortBottom:!1};await Le.collection("notes").update(e,i),location.reload(!1)})}const Oe=new f("http://127.0.0.1:8090");async function Ee(o){o.forEach(t=>{Pe(t)})}function Pe(o){o.addEventListener("click",async t=>{t.preventDefault();const e=o.id,s={finished:!1,freezeDate:new Date,freeze:!0,sortBottom:!0};await Oe.collection("notes").update(e,s),location.reload(!1)})}const Te=new f("http://127.0.0.1:8090");async function De(o){o.forEach(t=>{Ae(t)})}function Ae(o){o.addEventListener("click",async t=>{t.preventDefault();const e=o.id,i={finished:!1,freezeDate:NaN,freeze:!1,sortBottom:!1};await Te.collection("notes").update(e,i),location.reload(!1)})}function Ie(o){o.addEventListener("submit",function(t){t.preventDefault();const i=new URLSearchParams(window.location.search).get("selectedUserID");let s=this.select.value;location.href="/index.html?selectedUserID="+i+"&selectedListID="+encodeURIComponent(s)})}const qe=new f("http://127.0.0.1:8090");async function Ne(o){o.forEach(t=>{let e=t.querySelector('select[id="selectNewList"]');if(e){let i=e.value;xe(t,i)}else return})}function xe(o,t){o.addEventListener("submit",async e=>{e.preventDefault();const i=o.id;let s="";s=i.replace("-","");const n={list:t};await qe.collection("notes").update(s,n),location.reload(!1)})}function Re(o){o.addEventListener("submit",t=>{t.preventDefault();const i=new FormData(t.target).get("createListName");$e(i)})}async function $e(o){const t=new f("https://remember-ring.pockethost.io/");await t.collection("list").create({name:o}),(await t.collection("list").getFullList()).forEach(s=>location.href="/index.html?selectedValue="+s.id)}const N=new f("http://127.0.0.1:8090");function Ue(o){o.addEventListener("click",t=>{t.preventDefault(),je()})}async function je(){let o=new URLSearchParams(window.location.search),t=o.get("selectedListID");t==null&&(t=o.get("select"));let e=o.get("selectedUserID");confirm("When You delete the note list you'l never get it back! All your notes of this list will be gone!")&&((await N.collection("notes").getFullList()).forEach(async s=>{s.list==t&&await N.collection("notes").delete(s.id)}),await N.collection("list").delete(t),location.href="/index.html?selectedUserID="+e)}function Be(o){o.addEventListener("submit",t=>{t.preventDefault();const i=new FormData(t.target).get("renameList");let n=new URLSearchParams(window.location.search).get("selectedValue");Fe(n,i)})}async function Fe(o,t){const e=new f("http://127.0.0.1:8090"),i={name:t};await e.collection("list").update(o,i),location.href="/index.html?selectedValue="+o}function Me(o){let t=new Date(o),e=new Date;return t.setHours(0,0,0,0),e.setHours(0,0,0,0),e<t}const J=new f("https://remember-ring.pockethost.io/");await J.collection("users").getFullList({sort:"-created"});function ze(o){o.addEventListener("submit",t=>{t.preventDefault();const e=new FormData(t.target),i=e.get("createAccountName"),s=e.get("createAccountEmail"),n=e.get("createAccountPassword"),r=e.get("createAccountConfirmPassword");We(i.replaceAll(" ",""),s.toLocaleLowerCase(),n,r)})}async function We(o,t,e,i){if(e===i){const s={username:o,email:t,password:e,passwordConfirm:i,emailVisibility:!0};try{const n=await J.collection("users").create(s);location.href="/index.html?selectedUserID="+n.id}catch{alert("Account already exists with that email address, or name! Please login or use a different email address.")}}else alert("Passwords do not match")}function Ke(o){o.addEventListener("submit",t=>{t.preventDefault();const e=new FormData(t.target),i=e.get("loginEmail"),s=e.get("loginPassword");_e(i.toLowerCase(),s)})}async function _e(o,t){const e=new f("https://remember-ring.pockethost.io/");try{const i=await e.collection("users").authWithPassword(o,t);location.href="/index.html?selectedUserID="+i.record.id}catch{alert("Invalid email or password")}}function He(o){o.addEventListener("click",t=>{if(t.preventDefault(),confirm("Are you sure you want to log out?"))location.href="/index.html";else return})}function Ve(o,t,e){let i=t/e*100;o.style.width=i+"%",i<=10&&(o.innerHTML=Math.round(i)+"%")}const A=new f("http://127.0.0.1:8090");let Z=new URLSearchParams(window.location.search),x=Z.get("selectedUserID"),T=Z.get("selectedListID"),L=null;const Ge=await A.collection("notes").getFullList({sort:"sortBottom"}),Je=await A.collection("list").getFullList({sort:"updated"});let R=[],D=[],$=[],M=[],z="",W=0,K=0;x!==null?(M=Je.filter(e=>e.user===x),R=Ge.filter(e=>e.list===T),z=(await A.collection("users").getOne(x,{})).username,T!==null&&(L=(await A.collection("list").getOne(T,{})).name),R.forEach(e=>{e.finished&&K++,W++}),M.forEach(e=>{$.push(`
    <option value="${e.id}">${e.name}</option>
`)}),R.forEach(e=>{new Date().toLocaleString("de-DE",{timeZone:"Europe/Berlin",day:"2-digit",month:"2-digit",year:"numeric"}),new Date(e.deadline).toLocaleString("de-DE",{timeZone:"Europe/Berlin",day:"2-digit",month:"2-digit",year:"numeric"});const i=new Date(e.created).toLocaleString("de-DE",{timeZone:"Europe/Berlin",weekday:"long",hour:"2-digit",minute:"2-digit",day:"2-digit",month:"short",year:"numeric"})+" Uhr",s=new Date(e.deadline).toLocaleString("de-DE",{timeZone:"Europe/Berlin",weekday:"long",day:"2-digit",month:"short",year:"numeric"}),n=new Date(e.finishedDate).toLocaleString("de-DE",{timeZone:"Europe/Berlin",weekday:"long",hour:"2-digit",minute:"2-digit",day:"2-digit",month:"short",year:"numeric"})+" Uhr",r=new Date(e.freezeDate).toLocaleString("de-DE",{timeZone:"Europe/Berlin",weekday:"long",hour:"2-digit",minute:"2-digit",day:"2-digit",month:"short",year:"numeric"})+" Uhr",a=new Date(e.updated).toLocaleString("de-DE",{timeZone:"Europe/Berlin",weekday:"long",hour:"2-digit",minute:"2-digit",day:"2-digit",month:"short",year:"numeric"})+" Uhr";let l=[],d=[],h=[],y="",u=[],c="",p="";if(Me(e.deadline)?(c="no",p="The deadline you've set"):(c="deadlineIsOver",p="Your time is over set a new deadline or mark the note as finsihed"),!(e.finished&&e.freeze)){switch(e.created===e.updated){case!0:u.push(`
      <p id="noteDate"><span id="datePrefix">Created: </span>${i}</p>
      `);break;case!1:u.push(`
        <p id="noteDate"><span id="datePrefix">Updated: </span>${a}</p>
      `);break}switch(e.finished&&!e.freeze?(y="finished",l.push(`
    <i class="fa-solid fa-square-check" id="headerPrefixCheck"></i>
    `),h.push(`
    <li><button id ="${e.id}" class="deleteButton" type="button" data-tooltip="Delete the current note"><i class="fa-solid fa-triangle-exclamation"></i></button></li>
    <li><button id ="${e.id}" class="unfinishButton" type="button" data-tooltip="Mark the note as unfinished"><i class="fa-solid fa-hourglass-start"></i></button></li>
    `),d.push(`
    <p id="noteDeadline"><span id="deadlinePrefix">Finished: </span> ${n}</p>
    ${u}
    `)):!e.finished&&!e.freeze?(l.push(`
    <i class="fa-solid fa-hourglass-start" id="headerPrefixHourglassStart"></i>
    `),h.push(`
    <li><button id ="${e.id}" class="finishButton" type="button" data-tooltip="Mark the note as finished"><i class="fa-solid fa-trophy"></i></button></li>
    <li><button id ="${e.id}" class="freezeButton" type="button" data-tooltip="Mark the note as freezed"><i class="fa-solid fa-snowflake"></i></button></li>
    `),d.push(`
    <p id="noteDeadline"><span id="deadlinePrefix" data-tooltip="${p}">Deadline: </span><span id="${c}" data-tooltip="${p}"> ${s}</span></p>
    ${u}
    `)):e.freeze&&!e.finished?(y="freeze",l.push(`
    <i class="fa-solid fa-lock" id="headerPrefixLock"></i>
    `),h.push(`
    <li><button id ="${e.id}" class="deleteButton" type="button" data-tooltip="Delete the current note"><i class="fa-solid fa-triangle-exclamation"></i></button></li>
    <li><button id ="${e.id}" class="unfreezeButton" type="button" data-tooltip="Mark the note as not freezed"><i class="fa-solid fa-backward"></i></button></li>
    `),d.push(`
    <p id="noteDeadline"><span id="deadlinePrefix">Freezed: </span> ${r}</p>
    ${u}
    `)):!e.freeze&&!e.finished&&(l.push(`
    <i class="fa-solid fa-hourglass-start" id="headerPrefixHourglassStart"></i>
    `),h.push(`
    <li><button id ="${e.id}" class="finishButton" type="button" data-tooltip="Mark the note as finished"><i class="fa-solid fa-trophy"></i></button></li>
    <li><button id ="${e.id}" class="freezeButton" type="button" data-tooltip="Mark the note as freezed"><i class="fa-solid fa-snowflake"></i></button></li>
    `),d.push(`
    <p id="noteDeadline"><span id="deadlinePrefix">Deadline: </span><span id="${c}"> ${s}</span></p>
    ${u}
    `)),D.push(`
        <dialog id="${e.id}">
        <article>
          <header>
            <h3>Update</h3>
          </header>
          <form id=${e.id} class="updateNote" action=""> 
            <input type="text" class="form-control" value="${e.title}" placeholder="Title..." id="newNoteTitle" maxlength="20" name="newNoteTitle">
            <input type="text" class="form-control" value="${e.text}" placeholder="Text..." id="newNoteText" name="newNoteText">
            <input type="date"  class="form-control" value="${e.deadline}" id="newNoteDeadline..." name="newNoteDeadline" required>
            <button type="submit" data-tooltip="Update the note" id="${e.id}"><i class="fa-solid fa-retweet"></i></button>
          </form>
        </article>
      </dialog>
      <dialog id="${e.id}-">
        <article>
          <header>
            <h3>Update</h3>
          </header>
          <form id="${e.id}-" class="updateNoteList" action=""> 
            <select name="selectNewList" aria-label="Select" id="selectNewList"required>
              <option selected disabled value="">${L}</option>
              ${$}
            </select>
            <button type="submit" data-tooltip="Update the note list" id="${e.id}"><i class="fa-solid fa-retweet"></i></button>
          </form>
        </article>
      </dialog>
      `),e.created===e.updated){case!0:D.push(`
               <article class="noteList " id="${e.id}">
                <header class="noteListHeader">
                  <ul class="delete">
                    ${h}
                  <li>
                    <button class="updateModalButton" id="${e.id}" data-target="${e.id}" type="button" data-tooltip="Update the note"><i class="fa-solid fa-retweet"></i>
                  </li>
                  <li>
                  <button class="cahngeListModalButton" data-target="${e.id}-" type="button" data-tooltip="Change the current List of he modal"><i class="fa-solid fa-arrow-right-arrow-left"></i>
                </li>
                  </ul>
                  ${l}
                  <h5 class="noteHeader" id="${e.id}">${e.title}</h5>
                </header>
              <body>
              <p class="${y}" id="noteText ${e.id}">${e.text}</p>
              </body>
              <footer>
                ${d}
              </footer>
            </article>
          `);break;case!1:D.push(`
              <article class="noteList" id="${e.id}">
              <header class="noteListHeader">
              <ul class="delete">
                  <li>
                    ${h}
                  </li>
                  <li>
                  <button class="updateModalButton" data-target="${e.id}" type="button" data-tooltip="Update the note"><i class="fa-solid fa-retweet"></i>
                </li>
                <li>
                  <button class="cahngeListModalButton" data-target="${e.id}-" type="button" data-tooltip="Change the current List of he modal"><i class="fa-solid fa-arrow-right-arrow-left"></i>
                </li>
              </ul>
                  ${l}
                <h5 class="noteHeader" id="${e.id}-title">${e.title}</h5>
                
              </header>
              <body>
              <p class="${y}" id="noteText ${e.id}-text">${e.text}</p>
              </body>
              <footer>
                ${d}
              </footer>
            </article>
          `);break}}}),L==null&&(L="Select your list"),document.querySelector("#app").innerHTML=`
      
      <div class="topBar">
        <section id="createS">
          <h2>Welcome Back:<br><span id="accountNameH1">${z}</span></h2>
          <button type="button" id="logOut" data-tooltip="Logout of your Account"><i class="fa-solid fa-arrow-right-from-bracket"></i></button>
          <h2>${L}</h2>
          <ul id="startList">
          <li id="startItem">
            <button id="switchList" type="button" data-target="selectListModal" data-tooltip="Switch between your list">${L}</button>
          </li>
          <li id="startItem">
            <button id ="createNote" data-target="createModal" type="button" data-tooltip="Create a new note"><i class="fa-solid fa-plus" id="plusFA"></i></button>
          </li>  
          <li id="startItem">
            <button id="manageList" data-target="manageLisModal" type="button" data-tooltip="Manage your lists"><i class="fa-solid fa-gear"></i></button>   
          </li>   
          </ul>
          <div id="myProgress"><div id="myBar"></div></div>
          </button>
        </section>
        
      <div>
          ${D.join("")}
        </div>
      </div>
      <dialog id="selectListModal">
      <article>
        <header>
          <h1>Select List</h1>
        </header>
        <form id="selectListForm">
          <select name="select" aria-label="Select" id="select"required>
            <option selected disabled value="">Select List</option>
            ${$}
          </select>
          <button type="submit" class="submitButton">Submit</button>
        </form>
      </article>
      </dialog>
      <dialog id="createModal">
          <article>
            <header>
              <h3>Create new note</h3>
            </header>
            <form id="newNote" action="">
              <label for="noteTitle">Title</label><input type="text" class="form-control form-input" placeholder="Title..." id="noteTitle" name="noteTitle" maxlength="20" title="Max. 20 Chars" required>
              <label for="noteText">Note</label><input type="text" class="form-control" placeholder="Note..." id="noteText" name="noteText" required>
              <label for="noteDeadline">Deadline</label><input type="date" class="form-control" id="noteDeadline" name="noteDeadline" required>
              <button type="submit" id="create" data-tooltip="Create a note">Create</button>
            </form>
          </article>
        </dialog>    
        <dialog id="manageLisModal">
          <article>
            <header>
              <h3>Managae your lists</h3>
            </header>
            <form id="manageListForm" action="">
              <button type="button" id="createList" data-target="createListModal" data-tooltip="Create a list">Create new</button>
              <button type="button" id="deleteList" data-target="deleteListModal" data-tooltip="Delete the current list">Delete current</button>
              <button type="button" id="updateList" data-target="updateListModal" data-tooltip="update the current list">Update current</button>
            </form>
          </article>
        </dialog>
        <dialog id="createListModal">
   <article>
     <header>
       <h3>Create new list</h3>
     </header>
     <form id="newNoteList" action="">
      <label for="createListName">List name</label><input type="text" class="form-control" id="createListName" name="createListName" placeholder="Name...">
       <button type="submit" id="createListButton" data-tooltip="Create a List">Create</button>
    </form>
</article>
 </dialog>
 <dialog id="updateListModal">
   <article>
     <header>
      <h3>Update</h3>
    </header>
     <form id="updateNoteList" action="">
     <label for="updateList">New list name</label><input type="text" class="form-control" id="updateList" name="updateList" placeholder="New Name...">
      <button type="submit" id="create" data-tooltip="Create a List">Create</button>
    </form>
   </article>
 </dialog>  
    `,["#switchList","#createNote","#manageList","#createList","#updateList"].forEach(e=>P(document.querySelector(e))),document.querySelectorAll(".updateModalButton").forEach(e=>P(e)),document.querySelectorAll(".cahngeListModalButton").forEach(e=>P(e)),he(document.querySelector("#newNote"),T),Re(document.querySelector("#newNoteList")),Be(document.querySelector("#updateNoteList")),be(document.querySelectorAll(".updateNote")),Ne(document.querySelectorAll(".updateNoteList")),Ie(document.querySelector("#selectListForm")),Ee(document.querySelectorAll(".freezeButton")),De(document.querySelectorAll(".unfreezeButton")),Se(document.querySelectorAll(".finishButton")),ve(document.querySelectorAll(".unfinishButton")),fe(document.querySelectorAll(".deleteButton")),Ue(document.querySelector("#deleteList")),He(document.querySelector("#logOut")),Ve(document.querySelector("#myBar"),K,W)):(document.querySelector("#app").innerHTML=`
    <h1>You are not signed in!</h1>
    <h4>Please sign in to see your notes and lists</h4>
    <div class="topBar">
        <section id="create">
        <ul id="startList">
          <li id="startItem">
            <button id ="createAccountButton" data-target="createAccountModal" type="button" data-tooltip="Register"><i class="fa-solid fa-plus"></i></button>
          </li>  
          <li id="startItem">
            <button id="loginAccountButton" data-target="loginAccountModal" type="button" data-tooltip="Login to your Account"><i class="fa-solid fa-right-to-bracket"></i></button>   
          </li>   
          </ul>
        </section>
      <div>
    <dialog id="createAccountModal">
      <article>
        <header>
          <h3>Register</h3>
        </header>
        <form id="createAccountForm" action="">
          <input type="email" class="form-control" id="createAccountEmail" name="createAccountEmail" placeholder="Email..."  required>
          <input type="text" class="form-control" id="createAccountName" name="createAccountName" placeholder="Name..." required>
          <input type="password" class="form-control" id="createAccountPassword" name="createAccountPassword" placeholder="Password..." min-length="8" max-length="72" required>
          <input type="password" class="form-control" id="createAccountPasswordRepeat" name="createAccountConfirmPassword" placeholder="Repeat Password..." min-length="8" max-length="72" required>
          <button type="submit" id="create" data-tooltip="Register a new Account">Register</button>
        </form>
      </article>
    </dialog>
    <dialog id="loginAccountModal">
      <article>
        <header>
          <h3>Login</h3>
        </header>
        <form id="loginAccountForm" action="">
          <input type="email" class="form-control" id="loginAccounEmail" name="loginEmail" placeholder="Your account email" required>
          <input type="password" class="form-control" id="loginAccounPassword" name="loginPassword" placeholder="Your password" required>
          <button type="submit" id="create" data-tooltip="Login to your Account">Login</button>
        </form>
      </article>
    </dialog>
  `,["#createAccountButton","#loginAccountButton"].forEach(t=>P(document.querySelector(t))),ze(document.querySelector("#createAccountForm")),Ke(document.querySelector("#loginAccountForm")));
